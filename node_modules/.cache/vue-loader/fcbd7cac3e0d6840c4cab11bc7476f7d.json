{"remainingRequest":"/Users/work/webworkspace/cxy-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/work/webworkspace/cxy-web/src/views/system/menu-button/EditForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/work/webworkspace/cxy-web/src/views/system/menu-button/EditForm.vue","mtime":1610797110862},{"path":"/Users/work/webworkspace/cxy-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHF1ZXJ5TWVudUxpc3QsIHF1ZXJ5TWVudUluZm8sIHVwZGF0ZU1lbnUgfSBmcm9tICdAL2FwaS9tZW51LWJ1dHRvbicKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdFZGl0RnJvbScsCiAgcHJvcHM6IHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB2dWUvcmVxdWlyZS1kZWZhdWx0LXByb3AKICAgICdtZW51QnV0dG9uSWQnOiBTdHJpbmcsCiAgICAndmlzYWJsZSc6IEJvb2xlYW4KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZm9ybTogewogICAgICAgIG1lbnU6IHsKICAgICAgICAgIG1lbnVCdXR0b25JZDogJycsCiAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgIHVyaTogJycsCiAgICAgICAgICBidG5JZDogJycsCiAgICAgICAgICBtZW51QnV0dG9uVmFsdWU6ICcnLAogICAgICAgICAgaWNvbjogJycsCiAgICAgICAgICB0eXBlOiAwLAogICAgICAgICAgb3JkZXJzOiAnJywKICAgICAgICAgIHBhcmVudElkOiAnJwogICAgICAgIH0sCiAgICAgICAgbWVudUxpc3Q6IFtdCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldE1lbnVJbmZvKCkKICAgIHRoaXMuZ2V0TWVudUxpc3QoKQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU3VibWl0KGZvcm0pIHsKICAgICAgdXBkYXRlTWVudSh0aGlzLmZvcm0ubWVudSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLmhhbmRsZUhpZGUoKQogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueaIkOWKnycsCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICB9KQogICAgICAgIHRoaXMuJGVtaXQoJ2dldE1lbnVzJykKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUhpZGUoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2hhbmRsZUVkaXRIaWRlJykKICAgIH0sCiAgICBnZXRNZW51SW5mbygpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICBxdWVyeU1lbnVJbmZvKHRoaXMubWVudUJ1dHRvbklkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YQogICAgICAgIGlmIChkYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgLy8gY29uc3QgZm9ybSA9IGRhdGEuZGF0YQogICAgICAgICAgLy8gaWYgKGZvcm0ubWVudS5wYXJlbnRJZCA9PT0gLTEpIHsKICAgICAgICAgIC8vICAgZm9ybS5tZW51LnBhcmVudElkID0gJycKICAgICAgICAgIC8vIH0KICAgICAgICAgIHRoaXMuZm9ybS5tZW51ID0gZGF0YS5kYXRhCiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgIH0pCiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICB9LAogICAgZ2V0TWVudUxpc3QoKSB7CiAgICAgIC8vIGNvbnN0IHRoYXQgPSB0aGlzCiAgICAgIHF1ZXJ5TWVudUxpc3QoKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhCiAgICAgICAgdGhpcy5mb3JtLm1lbnVMaXN0ID0gZGF0YS5kYXRhCiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["EditForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditForm.vue","sourceRoot":"src/views/system/menu-button","sourcesContent":["<template>\n  <el-dialog\n    title=\"编辑\"\n    :visible=\"visable\"\n    width=\"30%\"\n    :modal=\"false\"\n    :show-close=\"false\"\n  >\n    <!--   ref=\"form\"-->\n    <el-form ref=\"form\" v-loading=\"loading\" label-suffix=\":\" :model=\"form\" label-width=\"100px\">\n      <el-form-item label=\"菜单按钮\">\n        <el-input v-model=\"form.menu.name\" />\n      </el-form-item>\n      <el-form-item label=\"菜单url\">\n        <el-input v-model=\"form.menu.uri\" />\n      </el-form-item>\n      <el-form-item label=\"按钮Id\">\n        <el-input v-model=\"form.menu.btnId\" />\n      </el-form-item>\n      <el-form-item label=\"菜单按钮值\">\n        <el-input v-model=\"form.menu.menuButtonValue\" />\n      </el-form-item>\n      <el-form-item label=\"菜单图标\">\n        <el-input v-model=\"form.menu.icon\" />\n      </el-form-item>\n      <el-form-item label=\"是否为菜单\">\n        <el-radio-group v-model=\"form.menu.type\">\n          <el-radio :label=\"0\">是</el-radio>\n          <el-radio :label=\"1\">否</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"同级序号\">\n        <el-input v-model=\"form.menu.orders\" />\n      </el-form-item>\n      <el-form-item label=\"状态\">\n        <el-radio-group v-model=\"form.menu.state\">\n          <el-radio :label=\"0\">禁用</el-radio>\n          <el-radio :label=\"1\">正常</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"上级菜单\">\n        <el-select v-model=\"form.menu.parentId\" filterable clearable placeholder=\"请选择\">\n          <el-option\n            v-for=\"item in form.menuList\"\n            :key=\"item.menuButtonId\"\n            :label=\"item.name\"\n            :value=\"item.menuButtonId\"\n          />\n        </el-select>\n      </el-form-item>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"handleHide\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"handleSubmit('form')\">确 定</el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\nimport { queryMenuList, queryMenuInfo, updateMenu } from '@/api/menu-button'\nexport default {\n  name: 'EditFrom',\n  props: {\n    // eslint-disable-next-line vue/require-default-prop\n    'menuButtonId': String,\n    'visable': Boolean\n  },\n  data() {\n    return {\n      loading: false,\n      form: {\n        menu: {\n          menuButtonId: '',\n          name: '',\n          uri: '',\n          btnId: '',\n          menuButtonValue: '',\n          icon: '',\n          type: 0,\n          orders: '',\n          parentId: ''\n        },\n        menuList: []\n      }\n    }\n  },\n  created() {\n    this.getMenuInfo()\n    this.getMenuList()\n  },\n  methods: {\n    handleSubmit(form) {\n      updateMenu(this.form.menu).then((response) => {\n        this.handleHide()\n        this.$message({\n          showClose: true,\n          message: '修改成功',\n          type: 'success'\n        })\n        this.$emit('getMenus')\n      }).catch(error => {\n        console.log(error)\n      })\n    },\n    handleHide() {\n      this.$emit('handleEditHide')\n    },\n    getMenuInfo() {\n      this.loading = true\n      queryMenuInfo(this.menuButtonId).then(response => {\n        const data = response.data\n        if (data.code === 200) {\n          // const form = data.data\n          // if (form.menu.parentId === -1) {\n          //   form.menu.parentId = ''\n          // }\n          this.form.menu = data.data\n        }\n      }).catch(error => {\n        console.log(error)\n      })\n      this.loading = false\n    },\n    getMenuList() {\n      // const that = this\n      queryMenuList().then((response) => {\n        const data = response.data\n        this.form.menuList = data.data\n      }).catch(error => {\n        console.log(error)\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}
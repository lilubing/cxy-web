{"remainingRequest":"/Users/work/webworkspace/cxy-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/work/webworkspace/cxy-web/src/views/system/menu-button/AddForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/work/webworkspace/cxy-web/src/views/system/menu-button/AddForm.vue","mtime":1611109182898},{"path":"/Users/work/webworkspace/cxy-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUcmVlU2VsZWN0IGZyb20gJ0AvY29tcG9uZW50cy9UcmVlU2VsZWN0JwppbXBvcnQgeyBxdWVyeU1lbnVMaXN0LCBhZGRNZW51IH0gZnJvbSAnQC9hcGkvbWVudS1idXR0b24nCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQWRkRnJvbScsCiAgY29tcG9uZW50czogeyBUcmVlU2VsZWN0IH0sCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHZ1ZS9yZXF1aXJlLXByb3AtdHlwZXMKICBwcm9wczogWyd2aXNhYmxlJ10sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAvLyDmuIXnqbrmoJHlvaLpgInmi6nmoYbmlbDmja4KICAgICAgY2xlYXJUcmVlU2VsZWN0OiAwLAogICAgICBkZWZhdWx0UHJvcHM6IHsKICAgICAgICBsYWJlbDogJ25hbWUnCiAgICAgIH0sCiAgICAgIC8vIOaOp+WItuagkee7hOS7tuaYvuekuiB2LWlmIOS8oOWAvOeUqAogICAgICB0cmVlRmxhZzogZmFsc2UsCiAgICAgIGRlZmF1bHRDaGVja2VkS2V5czogW10sCiAgICAgIGNoZWNrZWRLZXlzOiBbXSwKICAgICAgbm9kZUtleTogJ21lbnVCdXR0b25JZCcsCiAgICAgIGZvcm06IHsKICAgICAgICBtZW51OiB7CiAgICAgICAgICBtZW51QnV0dG9uSWQ6ICcnLAogICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICB1cmk6ICcnLAogICAgICAgICAgYnRuSWQ6ICcnLAogICAgICAgICAgbWVudUJ1dHRvblZhbHVlOiAnJywKICAgICAgICAgIGljb246ICcnLAogICAgICAgICAgdHlwZTogMCwKICAgICAgICAgIG9yZGVyczogJycsCiAgICAgICAgICBwYXJlbnRJZDogJycsCiAgICAgICAgICBzdGF0ZTogMQogICAgICAgIH0sCiAgICAgICAgbWVudUxpc3Q6IFtdCiAgICAgIH0KICAgIH0KICB9LAogIC8qIGNvbXB1dGVkOnsKICAgICAgLi4ubWFwR2V0dGVycyhbJ3Zpc2FibGUnXSkKICAgIH0sKi8KICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRNZW51TGlzdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVTdWJtaXQoZm9ybSkgewogICAgICBhZGRNZW51KHRoaXMuZm9ybS5tZW51KS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMuaGFuZGxlSGlkZSgpCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5oiQ5YqfJywKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgIH0pCiAgICAgICAgdGhpcy4kcmVmc1tmb3JtXS5yZXNldEZpZWxkcygpCiAgICAgICAgdGhpcy4kZW1pdCgnZ2V0TWVudXMnKQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlSGlkZSgpIHsKICAgICAgdGhpcy4kZW1pdCgnaGFuZGxlQWRkSGlkZScpCiAgICB9LAogICAgZ2V0TWVudUxpc3QoKSB7CiAgICAgIC8vIGNvbnN0IHRoYXQgPSB0aGlzCiAgICAgIHF1ZXJ5TWVudUxpc3QoKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhCiAgICAgICAgdGhpcy5mb3JtLm1lbnVMaXN0ID0gZGF0YS5kYXRhCiAgICAgICAgdGhpcy50cmVlRmxhZyA9IHRydWUKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICB9KQogICAgfSwKICAgIHBvcG92ZXJIaWRlKGNoZWNrZWRJZHMsIGNoZWNrZWREYXRhKSB7CiAgICAgIC8vIOS8muiiq+inpuWPkeS4pOasoeeahOmXrumimAogICAgICBpZiAoY2hlY2tlZERhdGEgIT09IHVuZGVmaW5lZCAmJiBjaGVja2VkRGF0YSAhPSBudWxsKSB7CiAgICAgICAgdGhpcy5mb3JtLm1lbnUucGFyZW50SWQgPSBjaGVja2VkRGF0YS5tZW51QnV0dG9uSWQKICAgICAgICAvLyBjaGVja2VkRGF0YS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIC8vICAgaWYgKGl0ZW0uY2hpbGRyZW5MaXN0ID09PSB1bmRlZmluZWQgfHwgaXRlbS5jaGlsZHJlbkxpc3QgPT0gbnVsbCkgewogICAgICAgIC8vICAgICB0aGlzLmNhckxpc3QucHVzaChpdGVtLm1lbnVJZCkKICAgICAgICAvLyAgIH0KICAgICAgICAvLyB9KQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["AddForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddForm.vue","sourceRoot":"src/views/system/menu-button","sourcesContent":["<template>\n  <el-dialog\n    title=\"添加\"\n    :visible=\"visable\"\n    width=\"30%\"\n    :modal=\"false\"\n    :show-close=\"false\"\n  >\n    <el-form ref=\"form\" label-suffix=\":\" :model=\"form\" label-width=\"100px\">\n      <el-form-item label=\"菜单按钮\">\n        <el-input v-model=\"form.menu.name\" />\n      </el-form-item>\n      <el-form-item label=\"菜单url\">\n        <el-input v-model=\"form.menu.uri\" />\n      </el-form-item>\n      <el-form-item label=\"按钮Id\">\n        <el-input v-model=\"form.menu.btnId\" />\n      </el-form-item>\n      <el-form-item label=\"菜单按钮值\">\n        <el-input v-model=\"form.menu.menuButtonValue\" />\n      </el-form-item>\n      <el-form-item label=\"菜单图标\">\n        <el-input v-model=\"form.menu.icon\" />\n      </el-form-item>\n      <el-form-item label=\"是否为菜单\">\n        <el-radio-group v-model=\"form.menu.type\">\n          <el-radio :label=\"0\">是</el-radio>\n          <el-radio :label=\"1\">否</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"同级序号\">\n        <el-input v-model=\"form.menu.orders\" />\n      </el-form-item>\n      <el-form-item label=\"状态\">\n        <el-radio-group v-model=\"form.menu.state\">\n          <el-radio :label=\"0\">禁用</el-radio>\n          <el-radio :label=\"1\">正常</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"上级菜单\">\n        <!-- https://blog.csdn.net/qq_32786139/article/details/108345247 -->\n        <tree-select\n          v-if=\"treeFlag\"\n          :data=\"form.menuList\"\n          placeholder=\"请选择\"\n          :default-props=\"defaultProps\"\n          :clear=\"clearTreeSelect\"\n          :node-key=\"nodeKey\"\n          :checked-keys=\"checkedKeys\"\n          @parent-event=\"popoverHide\"\n          @popoverHide=\"popoverHide\"\n        />\n        <!-- <el-select v-model=\"form.menu.parentId\" filterable clearable placeholder=\"请选择\">\n          <el-option\n            v-for=\"item in form.menuList\"\n            :key=\"item.menuButtonId\"\n            :label=\"item.name\"\n            :value=\"item.menuButtonId\"\n          />\n        </el-select> -->\n      </el-form-item>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"handleHide\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"handleSubmit('form')\">确 定</el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\nimport TreeSelect from '@/components/TreeSelect'\nimport { queryMenuList, addMenu } from '@/api/menu-button'\nexport default {\n  name: 'AddFrom',\n  components: { TreeSelect },\n  // eslint-disable-next-line vue/require-prop-types\n  props: ['visable'],\n  data() {\n    return {\n      loading: false,\n      // 清空树形选择框数据\n      clearTreeSelect: 0,\n      defaultProps: {\n        label: 'name'\n      },\n      // 控制树组件显示 v-if 传值用\n      treeFlag: false,\n      defaultCheckedKeys: [],\n      checkedKeys: [],\n      nodeKey: 'menuButtonId',\n      form: {\n        menu: {\n          menuButtonId: '',\n          name: '',\n          uri: '',\n          btnId: '',\n          menuButtonValue: '',\n          icon: '',\n          type: 0,\n          orders: '',\n          parentId: '',\n          state: 1\n        },\n        menuList: []\n      }\n    }\n  },\n  /* computed:{\n      ...mapGetters(['visable'])\n    },*/\n  created() {\n    this.getMenuList()\n  },\n  methods: {\n    handleSubmit(form) {\n      addMenu(this.form.menu).then((response) => {\n        this.handleHide()\n        this.$message({\n          showClose: true,\n          message: '添加成功',\n          type: 'success'\n        })\n        this.$refs[form].resetFields()\n        this.$emit('getMenus')\n      }).catch(error => {\n        console.log(error)\n      })\n    },\n    handleHide() {\n      this.$emit('handleAddHide')\n    },\n    getMenuList() {\n      // const that = this\n      queryMenuList().then((response) => {\n        const data = response.data\n        this.form.menuList = data.data\n        this.treeFlag = true\n      }).catch(error => {\n        console.log(error)\n      })\n    },\n    popoverHide(checkedIds, checkedData) {\n      // 会被触发两次的问题\n      if (checkedData !== undefined && checkedData != null) {\n        this.form.menu.parentId = checkedData.menuButtonId\n        // checkedData.forEach(item => {\n        //   if (item.childrenList === undefined || item.childrenList == null) {\n        //     this.carList.push(item.menuId)\n        //   }\n        // })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}
{"remainingRequest":"/Users/work/webworkspace/cxy-web/node_modules/babel-loader/lib/index.js!/Users/work/webworkspace/cxy-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/work/webworkspace/cxy-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/work/webworkspace/cxy-web/src/views/system/menu-button/EditForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/work/webworkspace/cxy-web/src/views/system/menu-button/EditForm.vue","mtime":1611108940583},{"path":"/Users/work/webworkspace/cxy-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFRyZWVTZWxlY3QgZnJvbSAnQC9jb21wb25lbnRzL1RyZWVTZWxlY3QnOwppbXBvcnQgeyBxdWVyeU1lbnVMaXN0LCBxdWVyeU1lbnVJbmZvLCB1cGRhdGVNZW51IH0gZnJvbSAnQC9hcGkvbWVudS1idXR0b24nOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0VkaXRGcm9tJywKICBjb21wb25lbnRzOiB7CiAgICBUcmVlU2VsZWN0OiBUcmVlU2VsZWN0CiAgfSwKICBwcm9wczogewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHZ1ZS9yZXF1aXJlLWRlZmF1bHQtcHJvcAogICAgJ21lbnVCdXR0b25JZCc6IFN0cmluZywKICAgICd2aXNhYmxlJzogQm9vbGVhbgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAvLyDmuIXnqbrmoJHlvaLpgInmi6nmoYbmlbDmja4KICAgICAgY2xlYXJUcmVlU2VsZWN0OiAwLAogICAgICBkZWZhdWx0UHJvcHM6IHsKICAgICAgICBsYWJlbDogJ25hbWUnCiAgICAgIH0sCiAgICAgIC8vIOaOp+WItuagkee7hOS7tuaYvuekuiB2LWlmIOS8oOWAvOeUqAogICAgICB0cmVlRmxhZzogZmFsc2UsCiAgICAgIGRlZmF1bHRDaGVja2VkS2V5czogW10sCiAgICAgIGNoZWNrZWRLZXlzOiBbXSwKICAgICAgbm9kZUtleTogJ21lbnVCdXR0b25JZCcsCiAgICAgIGZvcm06IHsKICAgICAgICBtZW51OiB7CiAgICAgICAgICBtZW51QnV0dG9uSWQ6ICcnLAogICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICB1cmk6ICcnLAogICAgICAgICAgYnRuSWQ6ICcnLAogICAgICAgICAgbWVudUJ1dHRvblZhbHVlOiAnJywKICAgICAgICAgIGljb246ICcnLAogICAgICAgICAgdHlwZTogMCwKICAgICAgICAgIG9yZGVyczogJycsCiAgICAgICAgICBwYXJlbnRJZDogJycKICAgICAgICB9LAogICAgICAgIG1lbnVMaXN0OiBbXQogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TWVudUluZm8oKTsKICAgIHRoaXMuZ2V0TWVudUxpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KGZvcm0pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHVwZGF0ZU1lbnUodGhpcy5mb3JtLm1lbnUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMuaGFuZGxlSGlkZSgpOwoKICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn5L+u5pS55oiQ5YqfJywKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgIH0pOwoKICAgICAgICBfdGhpcy4kZW1pdCgnZ2V0TWVudXMnKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVIaWRlOiBmdW5jdGlvbiBoYW5kbGVIaWRlKCkgewogICAgICB0aGlzLiRlbWl0KCdoYW5kbGVFZGl0SGlkZScpOwogICAgfSwKICAgIGdldE1lbnVJbmZvOiBmdW5jdGlvbiBnZXRNZW51SW5mbygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBxdWVyeU1lbnVJbmZvKHRoaXMubWVudUJ1dHRvbklkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhOwoKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIF90aGlzMi5mb3JtLm1lbnUgPSBkYXRhOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICB9LAogICAgZ2V0TWVudUxpc3Q6IGZ1bmN0aW9uIGdldE1lbnVMaXN0KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIC8vIGNvbnN0IHRoYXQgPSB0aGlzCiAgICAgIHF1ZXJ5TWVudUxpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgX3RoaXMzLmNoZWNrZWRLZXlzLnB1c2goX3RoaXMzLmZvcm0ubWVudS5wYXJlbnRJZCk7CgogICAgICAgIF90aGlzMy5mb3JtLm1lbnVMaXN0ID0gZGF0YS5kYXRhOyAvLyDmjqfliLbmoJHnu4Tku7bmmL7npLogdi1pZiDkvKDlgLznlKgKCiAgICAgICAgX3RoaXMzLnRyZWVGbGFnID0gdHJ1ZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBwb3BvdmVySGlkZTogZnVuY3Rpb24gcG9wb3ZlckhpZGUoY2hlY2tlZElkcywgY2hlY2tlZERhdGEpIHsKICAgICAgLy8g5Lya6KKr6Kem5Y+R5Lik5qyh55qE6Zeu6aKYCiAgICAgIGlmIChjaGVja2VkRGF0YSAhPT0gdW5kZWZpbmVkICYmIGNoZWNrZWREYXRhICE9IG51bGwpIHsKICAgICAgICB0aGlzLmZvcm0ubWVudS5wYXJlbnRJZCA9IGNoZWNrZWREYXRhLm1lbnVCdXR0b25JZDsgLy8gY2hlY2tlZERhdGEuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAvLyAgIGlmIChpdGVtLmNoaWxkcmVuTGlzdCA9PT0gdW5kZWZpbmVkIHx8IGl0ZW0uY2hpbGRyZW5MaXN0ID09IG51bGwpIHsKICAgICAgICAvLyAgICAgdGhpcy5jYXJMaXN0LnB1c2goaXRlbS5tZW51SWQpCiAgICAgICAgLy8gICB9CiAgICAgICAgLy8gfSkKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["EditForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <el-dialog\n    title=\"编辑\"\n    :visible=\"visable\"\n    width=\"30%\"\n    :modal=\"false\"\n    :show-close=\"false\"\n  >\n    <!--   ref=\"form\"-->\n    <el-form ref=\"form\" v-loading=\"loading\" label-suffix=\":\" :model=\"form\" label-width=\"100px\">\n      <el-form-item label=\"菜单按钮\">\n        <el-input v-model=\"form.menu.name\" />\n      </el-form-item>\n      <el-form-item label=\"菜单url\">\n        <el-input v-model=\"form.menu.uri\" />\n      </el-form-item>\n      <el-form-item label=\"按钮Id\">\n        <el-input v-model=\"form.menu.btnId\" />\n      </el-form-item>\n      <el-form-item label=\"菜单按钮值\">\n        <el-input v-model=\"form.menu.menuButtonValue\" />\n      </el-form-item>\n      <el-form-item label=\"菜单图标\">\n        <el-input v-model=\"form.menu.icon\" />\n      </el-form-item>\n      <el-form-item label=\"是否为菜单\">\n        <el-radio-group v-model=\"form.menu.type\">\n          <el-radio :label=\"0\">是</el-radio>\n          <el-radio :label=\"1\">否</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"同级序号\">\n        <el-input v-model=\"form.menu.orders\" />\n      </el-form-item>\n      <el-form-item label=\"状态\">\n        <el-radio-group v-model=\"form.menu.state\">\n          <el-radio :label=\"0\">禁用</el-radio>\n          <el-radio :label=\"1\">正常</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"上级菜单\">\n        <!-- https://blog.csdn.net/qq_32786139/article/details/108345247 -->\n        <tree-select\n          v-if=\"treeFlag\"\n          :data=\"form.menuList\"\n          placeholder=\"请选择\"\n          :default-props=\"defaultProps\"\n          :clear=\"clearTreeSelect\"\n          :node-key=\"nodeKey\"\n          :checked-keys=\"checkedKeys\"\n          @parent-event=\"popoverHide\"\n          @popoverHide=\"popoverHide\"\n        />\n      </el-form-item>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"handleHide\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"handleSubmit('form')\">确 定</el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\nimport TreeSelect from '@/components/TreeSelect'\nimport { queryMenuList, queryMenuInfo, updateMenu } from '@/api/menu-button'\nexport default {\n  name: 'EditFrom',\n  components: { TreeSelect },\n  props: {\n    // eslint-disable-next-line vue/require-default-prop\n    'menuButtonId': String,\n    'visable': Boolean\n  },\n  data() {\n    return {\n      loading: false,\n      // 清空树形选择框数据\n      clearTreeSelect: 0,\n      defaultProps: {\n        label: 'name'\n      },\n      // 控制树组件显示 v-if 传值用\n      treeFlag: false,\n      defaultCheckedKeys: [],\n      checkedKeys: [],\n      nodeKey: 'menuButtonId',\n      form: {\n        menu: {\n          menuButtonId: '',\n          name: '',\n          uri: '',\n          btnId: '',\n          menuButtonValue: '',\n          icon: '',\n          type: 0,\n          orders: '',\n          parentId: ''\n        },\n        menuList: []\n      }\n    }\n  },\n  created() {\n    this.getMenuInfo()\n    this.getMenuList()\n  },\n  methods: {\n    handleSubmit(form) {\n      updateMenu(this.form.menu).then((response) => {\n        this.handleHide()\n        this.$message({\n          showClose: true,\n          message: '修改成功',\n          type: 'success'\n        })\n        this.$emit('getMenus')\n      }).catch(error => {\n        console.log(error)\n      })\n    },\n    handleHide() {\n      this.$emit('handleEditHide')\n    },\n    getMenuInfo() {\n      this.loading = true\n      queryMenuInfo(this.menuButtonId).then(response => {\n        const data = response.data.data\n        if (response.data.code === 200) {\n          this.form.menu = data\n        }\n      }).catch(error => {\n        console.log(error)\n      })\n      this.loading = false\n    },\n    getMenuList() {\n      // const that = this\n      queryMenuList().then((response) => {\n        const data = response.data\n        this.checkedKeys.push(this.form.menu.parentId)\n        this.form.menuList = data.data\n        // 控制树组件显示 v-if 传值用\n        this.treeFlag = true\n      }).catch(error => {\n        console.log(error)\n      })\n    },\n    popoverHide(checkedIds, checkedData) {\n      // 会被触发两次的问题\n      if (checkedData !== undefined && checkedData != null) {\n        this.form.menu.parentId = checkedData.menuButtonId\n        // checkedData.forEach(item => {\n        //   if (item.childrenList === undefined || item.childrenList == null) {\n        //     this.carList.push(item.menuId)\n        //   }\n        // })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"sourceRoot":"src/views/system/menu-button"}]}
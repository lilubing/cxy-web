{"remainingRequest":"/Users/work/webworkspace/cxy-web/node_modules/babel-loader/lib/index.js!/Users/work/webworkspace/cxy-web/node_modules/eslint-loader/index.js??ref--13-0!/Users/work/webworkspace/cxy-web/src/store/modules/user.js","dependencies":[{"path":"/Users/work/webworkspace/cxy-web/src/store/modules/user.js","mtime":1610759658827},{"path":"/Users/work/webworkspace/cxy-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy93b3JrL3dlYndvcmtzcGFjZS9jeHktd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgbG9naW4sIGxvZ291dCwgZ2V0SW5mbywgZ2V0VXNlckJ1dHRvbiwgZ2V0TWVudVBlciwgZ2V0UHJpbmNpcGxlIH0gZnJvbSAnQC9hcGkvbG9naW4nOwppbXBvcnQgeyBnZXRUb2tlbiwgc2V0VG9rZW4sIHJlbW92ZVRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJzsKaW1wb3J0IHJvdXRlciwgeyByZXNldFJvdXRlciwgY29uc3RhbnRSb3V0ZXMsIGFzeW5jUm91dGVzIH0gZnJvbSAnQC9yb3V0ZXInOwovKiBMYXlvdXQgKi8KLy8gaW1wb3J0IExheW91dCBmcm9tICdAL2xheW91dCcKCnZhciBzdGF0ZSA9IHsKICB0b2tlbjogZ2V0VG9rZW4oKSwKICBuYW1lOiAnJywKICBhdmF0YXI6ICcnLAogIGludHJvZHVjdGlvbjogJycsCiAgcm9sZXM6IFtdLAogIHBlcm1pc3Npb246IHt9LAogIGFkZFJvdXRlcnM6IFtdLAogIHVzZXJJbmZvOiB7fQp9Owp2YXIgbXV0YXRpb25zID0gewogIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICB9LAogIFNFVF9JTlRST0RVQ1RJT046IGZ1bmN0aW9uIFNFVF9JTlRST0RVQ1RJT04oc3RhdGUsIGludHJvZHVjdGlvbikgewogICAgc3RhdGUuaW50cm9kdWN0aW9uID0gaW50cm9kdWN0aW9uOwogIH0sCiAgU0VUX05BTUU6IGZ1bmN0aW9uIFNFVF9OQU1FKHN0YXRlLCBuYW1lKSB7CiAgICBzdGF0ZS5uYW1lID0gbmFtZTsKICB9LAogIFNFVF9BVkFUQVI6IGZ1bmN0aW9uIFNFVF9BVkFUQVIoc3RhdGUsIGF2YXRhcikgewogICAgc3RhdGUuYXZhdGFyID0gYXZhdGFyOwogIH0sCiAgU0VUX1JPTEVTOiBmdW5jdGlvbiBTRVRfUk9MRVMoc3RhdGUsIHJvbGVzKSB7CiAgICBzdGF0ZS5yb2xlcyA9IHJvbGVzOwogIH0sCiAgU0VUX0JUTl9QRVI6IGZ1bmN0aW9uIFNFVF9CVE5fUEVSKHN0YXRlLCBvYmopIHsKICAgIHN0YXRlLnBlcm1pc3Npb25bb2JqLmtleV0gPSBvYmouZGF0YTsKICB9LAogIFNFVF9VU0VSSU5GTzogZnVuY3Rpb24gU0VUX1VTRVJJTkZPKHN0YXRlLCB1c2VySW5mbykgewogICAgc3RhdGUudXNlckluZm8gPSB1c2VySW5mbzsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIC8vIOmAkuW9kuiOt+WPluaMiemSruadg+mZkAogIEdldEJ0blBlcm1pc3Npb246IGZ1bmN0aW9uIEdldEJ0blBlcm1pc3Npb24oX3JlZiwgaWRzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmLnN0YXRlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgaWYgKCFpZHMpIHsKICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgaXRlcmF0b3IgPSBmdW5jdGlvbiBpdGVyYXRvcihpKSB7CiAgICAgICAgaWYgKGkgPT09IGlkcy5sZW5ndGgpIHsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IC8vIOW8guatpeivt+axgu+8jAoKCiAgICAgICAgZ2V0VXNlckJ1dHRvbihpZHNbaV0sIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgY29tbWl0KCdTRVRfQlROX1BFUicsIHsKICAgICAgICAgICAga2V5OiBpZHNbaV0sCiAgICAgICAgICAgIGRhdGE6IHJlc3BvbnNlLmRhdGEKICAgICAgICAgIH0pOwogICAgICAgICAgaSsrOwogICAgICAgICAgaXRlcmF0b3IoaSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIGl0ZXJhdG9yKDApOwogICAgfSk7CiAgfSwKICBHZW5lcmF0ZVJvdXRlczogZnVuY3Rpb24gR2VuZXJhdGVSb3V0ZXMoX3JlZjIpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGdldE1lbnVQZXIoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJykpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgY29uc29sZS5sb2coYXN5bmNSb3V0ZXMpOwogICAgICAgIGNvbnNvbGUubG9nKGNvbnN0YW50Um91dGVzKTsKICAgICAgICB2YXIgcGVybWlzc2lvblBhZ2UgPSByZXNwb25zZS5kYXRhOwogICAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgICB2YXIgdGVtcCA9IGFzeW5jUm91dGVzLm1hcChmdW5jdGlvbiAobikgewogICAgICAgICAgdmFyIG9iaiA9IHt9OwoKICAgICAgICAgIGZvciAodmFyIGtleSBpbiBuKSB7CiAgICAgICAgICAgIGlmIChrZXkgIT09ICdjaGlsZHJlbicpIHsKICAgICAgICAgICAgICBvYmpba2V5XSA9IG5ba2V5XTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgLy8g5bCG5rKh5pyJbWVudUlk55qE6I+c5Y2V55u05o6l5bGV56S65Ye65p2lCiAgICAgICAgICAgICAgICB2YXIgYXJyVGVtcCA9IFtdOwogICAgICAgICAgICAgICAgbi5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgICAgICAgICBpZiAoIWNoaWxkLm1ldGEubWVudUlkKSB7CiAgICAgICAgICAgICAgICAgICAgYXJyVGVtcC5wdXNoKGNoaWxkKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBvYmouY2hpbGRyZW4gPSBhcnJUZW1wOwogICAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gb2JqOwogICAgICAgIH0pOwogICAgICAgIHBlcm1pc3Npb25QYWdlLmZvckVhY2goZnVuY3Rpb24gKGEpIHsKICAgICAgICAgIGFzeW5jUm91dGVzLmZvckVhY2goZnVuY3Rpb24gKGIpIHsKICAgICAgICAgICAgYi5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coYy5tZXRhLnRpdGxlKTsKCiAgICAgICAgICAgICAgaWYgKGMubWV0YS5tZW51SWQgPT09IGEucGVybWlzc2lvbl9pZCkgewogICAgICAgICAgICAgICAgdGVtcC5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgIGlmIChkLm1ldGEucGFyZW50SWQgPT09IGIubWV0YS5wYXJlbnRJZCkgewogICAgICAgICAgICAgICAgICAgIGQuY2hpbGRyZW4ucHVzaChjKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOyAvLyDliKDpmaRjaGlsZHJlbiDplb/luqbkuLowIOeahOWvueixoQoKICAgICAgICB0ZW1wLmZvckVhY2goZnVuY3Rpb24gKG4pIHsKICAgICAgICAgIGlmIChuLmNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgcmVzdWx0LnB1c2gobik7CiAgICAgICAgICB9CiAgICAgICAgfSk7IC8vIHJlc3VsdCA9IGNvbnN0YW50Um91dGVzLmNvbmNhdChyZXN1bHQpCgogICAgICAgIHN0YXRlLmFkZFJvdXRlcnMgPSByZXN1bHQ7CiAgICAgICAgcmVzb2x2ZShyZXN1bHQpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8gdXNlciBsb2dpbgogIExvZ2luOiBmdW5jdGlvbiBMb2dpbihfcmVmMywgdXNlckluZm8pIHsKICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQsCiAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMy5kaXNwYXRjaDsKICAgIHZhciB1c2VyTmFtZSA9IHVzZXJJbmZvLnVzZXJOYW1lLAogICAgICAgIHBhc3N3b3JkID0gdXNlckluZm8ucGFzc3dvcmQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBsb2dpbih7CiAgICAgICAgdXNlck5hbWU6IHVzZXJOYW1lLnRyaW0oKSwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgICBzZXRUb2tlbihkYXRhLmFjY2Vzc190b2tlbik7CiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndXNlcklkJywgZGF0YS51c2VySWQpOwogICAgICAgIC8qKgogICAgICAgICAqIERpc3BsYXkgZGVmYXVsdCBjYXJkIGFmdGVyIGxvZ2luCiAgICAgICAgICovCgogICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3RhYmxlVHlwZScsICcyJyk7CiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnc2hvQWxsVGlja2V0cycsICcyJyk7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8gZ2V0IHVzZXIgaW5mbwogIEdldEluZm86IGZ1bmN0aW9uIEdldEluZm8oX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmNC5zdGF0ZSwKICAgICAgICBkaXNwYXRjaCA9IF9yZWY0LmRpc3BhdGNoOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgZ2V0SW5mbyhzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgdXNlckluZm8gPSByZXNwb25zZS5kYXRhOwogICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3VzZXJJbmZvJywgSlNPTi5zdHJpbmdpZnkodXNlckluZm8pKTsgLy8gaWYgKGRhdGEucm9sZXMgJiYgZGF0YS5yb2xlcy5sZW5ndGggPiAwKSB7IC8vIOmqjOivgei/lOWbnueahHJvbGVz5piv5ZCm5piv5LiA5Liq6Z2e56m65pWw57uECiAgICAgICAgLy8gICBjb21taXQoJ1NFVF9ST0xFUycsIGRhdGEucm9sZXMpCiAgICAgICAgLy8gfSBlbHNlIHsKICAgICAgICAvLyAgIHJlamVjdCgnZ2V0SW5mbzogcm9sZXMgbXVzdCBiZSBhIG5vbi1udWxsIGFycmF5ICEnKQogICAgICAgIC8vIH0KCiAgICAgICAgaWYgKCFyZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICByZWplY3QoJ1ZlcmlmaWNhdGlvbiBmYWlsZWQsIHBsZWFzZSBMb2dpbiBhZ2Fpbi4nKTsKICAgICAgICB9IC8vIGNvbnN0IHsgbmFtZSwgYXZhdGFyLCBpbnRyb2R1Y3Rpb24gfSA9IHVzZXJJbmZvCgoKICAgICAgICB2YXIgcm9sZXMgPSBbXTsKICAgICAgICB2YXIgYXV0aG9yaXRpZXMgPSB1c2VySW5mby5hdXRob3JpdGllczsKCiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGF1dGhvcml0aWVzLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgcm9sZXNbaW5kZXhdID0gYXV0aG9yaXRpZXNbaW5kZXhdOwogICAgICAgIH0gLy8gcm9sZXMgbXVzdCBiZSBhIG5vbi1lbXB0eSBhcnJheQoKCiAgICAgICAgaWYgKCFyb2xlcyB8fCByb2xlcy5sZW5ndGggPD0gMCkgewogICAgICAgICAgcmVqZWN0KCdnZXRJbmZvOiByb2xlcyBtdXN0IGJlIGEgbm9uLW51bGwgYXJyYXkhJyk7CiAgICAgICAgfQoKICAgICAgICBjb21taXQoJ1NFVF9VU0VSSU5GTycsIHVzZXJJbmZvKTsKICAgICAgICBjb21taXQoJ1NFVF9OQU1FJywgdXNlckluZm8udXNlck5hbWUpOyAvLyBjb21taXQoJ1NFVF9OQU1FJywgdXNlckluZm8ucmVhbE5hbWUpCiAgICAgICAgLy8gY29tbWl0KCdTRVRfUk9MRVMnLCByb2xlcykKCiAgICAgICAgaWYgKHVzZXJJbmZvLmF1dGhvcml0aWVzICYmIHVzZXJJbmZvLmF1dGhvcml0aWVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIC8vIOmqjOivgei/lOWbnueahHJvbGVz5piv5ZCm5piv5LiA5Liq6Z2e56m65pWw57uECiAgICAgICAgICBjb21taXQoJ1NFVF9ST0xFUycsIHJvbGVzKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVqZWN0KCdnZXRJbmZvOiByb2xlcyBtdXN0IGJlIGEgbm9uLW51bGwgYXJyYXkgIScpOwogICAgICAgIH0gLy8gY29tbWl0KCdTRVRfTkFNRScsIHJlYWxOYW1lKQogICAgICAgIC8vIGNvbW1pdCgnU0VUX0FWQVRBUicsIGF2YXRhcikKICAgICAgICAvLyBjb21taXQoJ1NFVF9JTlRST0RVQ1RJT04nLCBpbnRyb2R1Y3Rpb24pCgoKICAgICAgICByZXNvbHZlKHJvbGVzKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIOiOt+WPlueUqOaIt+S/oeaBrwogIEdldFByaW5jaXBsZTogZnVuY3Rpb24gR2V0UHJpbmNpcGxlKF9yZWY1KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjUuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjUuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBnZXRQcmluY2lwbGUoc3RhdGUudG9rZW4pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyB1c2VyIGxvZ291dAogIExvZ291dDogZnVuY3Rpb24gTG9nb3V0KF9yZWY2KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjYuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjYuc3RhdGUsCiAgICAgICAgZGlzcGF0Y2ggPSBfcmVmNi5kaXNwYXRjaDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGxvZ291dChzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCAnJyk7CiAgICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCBbXSk7CiAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlckluZm8nKTsKICAgICAgICAvKiogRGlzcGxheSBkZWZhdWx0IGNhcmQgYWZ0ZXIgbG9naW4gKi8KCiAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgndGFibGVUeXBlJyk7CiAgICAgICAgcmVtb3ZlVG9rZW4oKTsKICAgICAgICByZXNldFJvdXRlcigpOyAvLyByZXNldCB2aXNpdGVkIHZpZXdzIGFuZCBjYWNoZWQgdmlld3MKICAgICAgICAvLyB0byBmaXhlZCBodHRwczovL2dpdGh1Yi5jb20vUGFuSmlhQ2hlbi92dWUtZWxlbWVudC1hZG1pbi9pc3N1ZXMvMjQ4NQoKICAgICAgICBkaXNwYXRjaCgndGFnc1ZpZXcvZGVsQWxsVmlld3MnLCBudWxsLCB7CiAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8gcmVtb3ZlIHRva2VuCiAgUmVzZXRUb2tlbjogZnVuY3Rpb24gUmVzZXRUb2tlbihfcmVmNykgewogICAgdmFyIGNvbW1pdCA9IF9yZWY3LmNvbW1pdDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICBjb21taXQoJ1NFVF9UT0tFTicsICcnKTsKICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCBbXSk7CiAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgIHJlc29sdmUoKTsKICAgIH0pOwogIH0sCiAgLy8gZHluYW1pY2FsbHkgbW9kaWZ5IHBlcm1pc3Npb25zCiAgY2hhbmdlUm9sZXM6IGZ1bmN0aW9uIGNoYW5nZVJvbGVzKF9yZWY4LCByb2xlKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgY29tbWl0LCBkaXNwYXRjaCwgdG9rZW4sIF95aWVsZCRkaXNwYXRjaCwgcm9sZXMsIGFjY2Vzc1JvdXRlczsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmOC5jb21taXQsIGRpc3BhdGNoID0gX3JlZjguZGlzcGF0Y2g7CiAgICAgICAgICAgICAgdG9rZW4gPSByb2xlICsgJy10b2tlbic7CiAgICAgICAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCB0b2tlbik7CiAgICAgICAgICAgICAgc2V0VG9rZW4odG9rZW4pOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgndXNlci9HZXRJbmZvJyk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX3lpZWxkJGRpc3BhdGNoID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICByb2xlcyA9IF95aWVsZCRkaXNwYXRjaC5yb2xlczsKICAgICAgICAgICAgICByZXNldFJvdXRlcigpOyAvLyBnZW5lcmF0ZSBhY2Nlc3NpYmxlIHJvdXRlcyBtYXAgYmFzZWQgb24gcm9sZXMKCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgncGVybWlzc2lvbi9nZW5lcmF0ZVJvdXRlcycsIHJvbGVzLCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGFjY2Vzc1JvdXRlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgLy8gZHluYW1pY2FsbHkgYWRkIGFjY2Vzc2libGUgcm91dGVzCiAgICAgICAgICAgICAgcm91dGVyLmFkZFJvdXRlcyhhY2Nlc3NSb3V0ZXMpOyAvLyByZXNldCB2aXNpdGVkIHZpZXdzIGFuZCBjYWNoZWQgdmlld3MKCiAgICAgICAgICAgICAgZGlzcGF0Y2goJ3RhZ3NWaWV3L2RlbEFsbFZpZXdzJywgbnVsbCwgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["/Users/work/webworkspace/cxy-web/src/store/modules/user.js"],"names":["login","logout","getInfo","getUserButton","getMenuPer","getPrinciple","getToken","setToken","removeToken","router","resetRouter","constantRoutes","asyncRoutes","state","token","name","avatar","introduction","roles","permission","addRouters","userInfo","mutations","SET_TOKEN","SET_INTRODUCTION","SET_NAME","SET_AVATAR","SET_ROLES","SET_BTN_PER","obj","key","data","SET_USERINFO","actions","GetBtnPermission","ids","commit","Promise","resolve","reject","iterator","i","length","sessionStorage","getItem","then","response","catch","err","console","log","GenerateRoutes","permissionPage","result","temp","map","n","arrTemp","children","forEach","child","meta","menuId","push","a","b","c","title","permission_id","d","parentId","error","Login","dispatch","userName","password","trim","access_token","setItem","userId","GetInfo","JSON","stringify","authorities","index","GetPrinciple","Logout","removeItem","root","ResetToken","changeRoles","role","accessRoutes","addRoutes","namespaced"],"mappings":"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","sourcesContent":["import { login, logout, getInfo, getUserButton, getMenuPer, getPrinciple } from '@/api/login'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport router, { resetRouter, constantRoutes, asyncRoutes } from '@/router'\n/* Layout */\n// import Layout from '@/layout'\n\nconst state = {\n  token: getToken(),\n  name: '',\n  avatar: '',\n  introduction: '',\n  roles: [],\n  permission: {},\n  addRouters: [],\n  userInfo: {}\n}\n\nconst mutations = {\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_INTRODUCTION: (state, introduction) => {\n    state.introduction = introduction\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_ROLES: (state, roles) => {\n    state.roles = roles\n  },\n  SET_BTN_PER: (state, obj) => {\n    state.permission[obj.key] = obj.data\n  },\n  SET_USERINFO: (state, userInfo) => {\n    state.userInfo = userInfo\n  }\n}\n\nconst actions = {\n  // 递归获取按钮权限\n  GetBtnPermission({ commit, state }, ids) {\n    return new Promise((resolve, reject) => {\n      if (!ids) {\n        resolve()\n        return\n      }\n      const iterator = function(i) {\n        if (i === ids.length) {\n          resolve()\n          return\n        }\n        // 异步请求，\n        getUserButton(ids[i], sessionStorage.getItem('userId')).then(response => {\n          commit('SET_BTN_PER', { key: ids[i], data: response.data })\n          i++\n          iterator(i)\n        }).catch(err => {\n          console.log(err)\n          resolve()\n        })\n      }\n      iterator(0)\n    })\n  },\n  GenerateRoutes({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getMenuPer(sessionStorage.getItem('userId')).then(response => {\n        console.log(response.data)\n        console.log(asyncRoutes)\n        console.log(constantRoutes)\n\n        const permissionPage = response.data\n        var result = []\n\n        var temp = asyncRoutes.map(n => {\n          const obj = {}\n          for (const key in n) {\n            if (key !== 'children') {\n              obj[key] = n[key]\n            } else {\n              // 将没有menuId的菜单直接展示出来\n              const arrTemp = []\n              n.children.forEach(child => {\n                if (!child.meta.menuId) {\n                  arrTemp.push(child)\n                }\n              })\n              obj.children = arrTemp\n            }\n          }\n          return obj\n        })\n        permissionPage.forEach(a => {\n          asyncRoutes.forEach(b => {\n            b.children.forEach(c => {\n              console.log(c.meta.title)\n              if (c.meta.menuId === a.permission_id) {\n                temp.forEach(d => {\n                  if (d.meta.parentId === b.meta.parentId) {\n                    d.children.push(c)\n                  }\n                })\n              }\n            })\n          })\n        })\n        // 删除children 长度为0 的对象\n        temp.forEach(n => {\n          if (n.children.length > 0) {\n            result.push(n)\n          }\n        })\n        // result = constantRoutes.concat(result)\n        state.addRouters = result\n        resolve(result)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n  // user login\n  Login({ commit, dispatch }, userInfo) {\n    const { userName, password } = userInfo\n    return new Promise((resolve, reject) => {\n      login({ userName: userName.trim(), password: password }).then(response => {\n        const data = response.data.data\n        setToken(data.access_token)\n\n        sessionStorage.setItem('userId', data.userId)\n\n        /**\n         * Display default card after login\n         */\n        sessionStorage.setItem('tableType', '2')\n        sessionStorage.setItem('shoAllTickets', '2')\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // get user info\n  GetInfo({ commit, state, dispatch }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token).then(response => {\n        const userInfo = response.data\n        sessionStorage.setItem('userInfo', JSON.stringify(userInfo))\n\n        // if (data.roles && data.roles.length > 0) { // 验证返回的roles是否是一个非空数组\n        //   commit('SET_ROLES', data.roles)\n        // } else {\n        //   reject('getInfo: roles must be a non-null array !')\n        // }\n\n        if (!response.data) {\n          reject('Verification failed, please Login again.')\n        }\n\n        // const { name, avatar, introduction } = userInfo\n\n        const roles = []\n        const authorities = userInfo.authorities\n        for (let index = 0; index < authorities.length; index++) {\n          roles[index] = authorities[index]\n        }\n\n        // roles must be a non-empty array\n        if (!roles || roles.length <= 0) {\n          reject('getInfo: roles must be a non-null array!')\n        }\n\n        commit('SET_USERINFO', userInfo)\n        commit('SET_NAME', userInfo.userName)\n        // commit('SET_NAME', userInfo.realName)\n        // commit('SET_ROLES', roles)\n        if (userInfo.authorities && userInfo.authorities.length > 0) { // 验证返回的roles是否是一个非空数组\n          commit('SET_ROLES', roles)\n        } else {\n          reject('getInfo: roles must be a non-null array !')\n        }\n        // commit('SET_NAME', realName)\n        // commit('SET_AVATAR', avatar)\n        // commit('SET_INTRODUCTION', introduction)\n        resolve(roles)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // 获取用户信息\n  GetPrinciple({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getPrinciple(state.token).then(response => {\n        resolve(response)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // user logout\n  Logout({ commit, state, dispatch }) {\n    return new Promise((resolve, reject) => {\n      logout(state.token).then(() => {\n        commit('SET_TOKEN', '')\n        commit('SET_ROLES', [])\n        sessionStorage.removeItem('userInfo')\n        /** Display default card after login */\n        sessionStorage.removeItem('tableType')\n        removeToken()\n        resetRouter()\n\n        // reset visited views and cached views\n        // to fixed https://github.com/PanJiaChen/vue-element-admin/issues/2485\n        dispatch('tagsView/delAllViews', null, { root: true })\n\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // remove token\n  ResetToken({ commit }) {\n    return new Promise(resolve => {\n      commit('SET_TOKEN', '')\n      commit('SET_ROLES', [])\n      removeToken()\n      resolve()\n    })\n  },\n\n  // dynamically modify permissions\n  async changeRoles({ commit, dispatch }, role) {\n    const token = role + '-token'\n\n    commit('SET_TOKEN', token)\n    setToken(token)\n\n    const { roles } = await dispatch('user/GetInfo')\n\n    resetRouter()\n\n    // generate accessible routes map based on roles\n    const accessRoutes = await dispatch('permission/generateRoutes', roles, { root: true })\n    // dynamically add accessible routes\n    router.addRoutes(accessRoutes)\n\n    // reset visited views and cached views\n    dispatch('tagsView/delAllViews', null, { root: true })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n"]}]}
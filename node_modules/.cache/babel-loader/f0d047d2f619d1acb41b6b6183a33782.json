{"remainingRequest":"/Users/work/webworkspace/cxy-web/node_modules/babel-loader/lib/index.js!/Users/work/webworkspace/cxy-web/node_modules/eslint-loader/index.js??ref--13-0!/Users/work/webworkspace/cxy-web/src/utils/request.js","dependencies":[{"path":"/Users/work/webworkspace/cxy-web/src/utils/request.js","mtime":1610355054286},{"path":"/Users/work/webworkspace/cxy-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IE1lc3NhZ2VCb3ggfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7IC8vIGNyZWF0ZSBhbiBheGlvcyBpbnN0YW5jZQoKdmFyIHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEksCiAgLy8gdXJsID0gYmFzZSB1cmwgKyByZXF1ZXN0IHVybAogIC8vIHdpdGhDcmVkZW50aWFsczogdHJ1ZSwgLy8gc2VuZCBjb29raWVzIHdoZW4gY3Jvc3MtZG9tYWluIHJlcXVlc3RzCiAgdGltZW91dDogNTAwMCAvLyByZXF1ZXN0IHRpbWVvdXQKCn0pOyAvLyByZXF1ZXN0IGludGVyY2VwdG9yCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgLy8gZG8gc29tZXRoaW5nIGJlZm9yZSByZXF1ZXN0IGlzIHNlbnQKICAvLyBpZiAoc3RvcmUuZ2V0dGVycy50b2tlbikgewogIGlmIChjb25maWcubWV0aG9kID09PSAncG9zdCcpIHsKICAgIC8vIGxldCBlYWNoIHJlcXVlc3QgY2FycnkgdG9rZW4KICAgIC8vIFsnWC1Ub2tlbiddIGlzIGEgY3VzdG9tIGhlYWRlcnMga2V5CiAgICAvLyBwbGVhc2UgbW9kaWZ5IGl0IGFjY29yZGluZyB0byB0aGUgYWN0dWFsIHNpdHVhdGlvbgogICAgY29uZmlnLmhlYWRlcnMuQ29udGVudFR5cGUgPSAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgnOyAvLyBjb25maWcuaGVhZGVyc1snWC1Ub2tlbiddID0gZ2V0VG9rZW4oKQogIH0KCiAgaWYgKGdldFRva2VuKCkpIHsKICAgIC8vIGRlYnVnZ2VyCiAgICAvLyDorqnmr4/kuKror7fmsYLmkLrluKboh6rlrprkuYl0b2tlbiDor7fmoLnmja7lrp7pmYXmg4XlhrXoh6rooYzkv67mlLkKICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyICcgKyBnZXRUb2tlbigpOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgLy8gZG8gc29tZXRoaW5nIHdpdGggcmVxdWVzdCBlcnJvcgogIGNvbnNvbGUubG9nKGVycm9yKTsgLy8gZm9yIGRlYnVnCgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOyAvLyByZXNwb25zZSBpbnRlcmNlcHRvcgoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKAovKioKICogSWYgeW91IHdhbnQgdG8gZ2V0IGh0dHAgaW5mb3JtYXRpb24gc3VjaCBhcyBoZWFkZXJzIG9yIHN0YXR1cwogKiBQbGVhc2UgcmV0dXJuICByZXNwb25zZSA9PiByZXNwb25zZQoqLwoKLyoqCiAqIERldGVybWluZSB0aGUgcmVxdWVzdCBzdGF0dXMgYnkgY3VzdG9tIGNvZGUKICogSGVyZSBpcyBqdXN0IGFuIGV4YW1wbGUKICogWW91IGNhbiBhbHNvIGp1ZGdlIHRoZSBzdGF0dXMgYnkgSFRUUCBTdGF0dXMgQ29kZQogKi8KZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgcmV0dXJuIHJlc3BvbnNlOwp9LAovKioKcmVzcG9uc2UgPT4gewogIGNvbnN0IHJlcyA9IHJlc3BvbnNlLmRhdGEKICAvLyBpZiB0aGUgY3VzdG9tIGNvZGUgaXMgbm90IDIwMDAwLCBpdCBpcyBqdWRnZWQgYXMgYW4gZXJyb3IuCiAgaWYgKHJlcy5jb2RlICE9PSAyMDAwMCkgewogICAgTWVzc2FnZSh7CiAgICAgIG1lc3NhZ2U6IHJlcy5tZXNzYWdlIHx8ICdFcnJvcicsCiAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgIGR1cmF0aW9uOiA1ICogMTAwMAogICAgfSkKICAgICAvLyA1MDAwODogSWxsZWdhbCB0b2tlbjsgNTAwMTI6IE90aGVyIGNsaWVudHMgbG9nZ2VkIGluOyA1MDAxNDogVG9rZW4gZXhwaXJlZDsKICAgIGlmIChyZXMuY29kZSA9PT0gNTAwMDggfHwgcmVzLmNvZGUgPT09IDUwMDEyIHx8IHJlcy5jb2RlID09PSA1MDAxNCkgewogICAgICAvLyB0byByZS1sb2dpbgogICAgICBNZXNzYWdlQm94LmNvbmZpcm0oJ1lvdSBoYXZlIGJlZW4gbG9nZ2VkIG91dCwgeW91IGNhbiBjYW5jZWwgdG8gc3RheSBvbiB0aGlzIHBhZ2UsIG9yIGxvZyBpbiBhZ2FpbicsICdDb25maXJtIGxvZ291dCcsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ1JlLUxvZ2luJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnQ2FuY2VsJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ3VzZXIvcmVzZXRUb2tlbicpLnRoZW4oKCkgPT4gewogICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCkKICAgICAgICB9KQogICAgICB9KQogICAgfQogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihyZXMubWVzc2FnZSB8fCAnRXJyb3InKSkKICB9IGVsc2UgewogICAgcmV0dXJuIHJlcwogIH0KfSwKKi8KZnVuY3Rpb24gKGVycm9yKSB7CiAgLyoKICBjb25zb2xlLmxvZygnZXJyJyArIGVycm9yKSAvLyBmb3IgZGVidWcKICBNZXNzYWdlKHsKICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsCiAgICB0eXBlOiAnZXJyb3InLAogICAgZHVyYXRpb246IDUgKiAxMDAwCiAgfSkKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpCiAgKi8KICB0cnkgewogICAgdmFyIHJlcyA9IGVycm9yLnJlc3BvbnNlLmRhdGE7CgogICAgaWYgKHJlcy5zdGF0dXMgIT09IDIwMCkgewogICAgICAvLyDnmbvlvZXotoXml7bmiJbmsqHmnInmnYPpmZDkuoYKICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDQwMSkgewogICAgICAgIC8vIOivt+iHquihjOWcqOW8leWFpSBNZXNzYWdlQm94CiAgICAgICAgLy8gaW1wb3J0IHsgTWVzc2FnZSwgTWVzc2FnZUJveCB9IGZyb20gJ2VsZW1lbnQtdWknCiAgICAgICAgTWVzc2FnZUJveC5jb25maXJtKCfkvaDlt7Looqvnmbvlh7rvvIzlj6/ku6Xlj5bmtojnu6fnu63nlZnlnKjor6XpobXpnaLvvIzmiJbogIXph43mlrDnmbvlvZUnLCAn56Gu5a6a55m75Ye6JywgewogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfph43mlrDnmbvlvZUnLAogICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdMb2dPdXQnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8g5Li65LqG6YeN5paw5a6e5L6L5YyWdnVlLXJvdXRlcuWvueixoSDpgb/lhY1idWcKICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCdlcnJvcicpOwogICAgfQogIH0gY2F0Y2ggKGUpIHsKICAgIGlmIChlcnJvci5tZXNzYWdlID09PSAnTmV0d29yayBFcnJvcicpIHsKICAgICAgLy8g6K+36Ieq6KGM5Zyo5byV5YWlIE1lc3NhZ2VCb3gKICAgICAgLy8gaW1wb3J0IHsgTWVzc2FnZSwgTWVzc2FnZUJveCB9IGZyb20gJ2VsZW1lbnQtdWknCiAgICAgIE1lc3NhZ2VCb3guY29uZmlybSgn572R57uc6K+35rGC6ZSZ6K+v77yM6K+36YeN5paw55m75b2VJywgJ+ehruWumueZu+WHuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+mHjeaWsOeZu+W9lScsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHN0b3JlLmRpc3BhdGNoKCdMb2dPdXQnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIOS4uuS6humHjeaWsOWunuS+i+WMlnZ1ZS1yb3V0ZXLlr7nosaEg6YG/5YWNYnVnCiAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQoKICBjb25zb2xlLmxvZygnZXJyJyArIGVycm9yKTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["/Users/work/webworkspace/cxy-web/src/utils/request.js"],"names":["axios","MessageBox","store","getToken","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","method","headers","ContentType","Authorization","error","console","log","Promise","reject","response","res","data","status","confirm","confirmButtonText","cancelButtonText","type","then","dispatch","location","reload","e","message"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,YAA3B;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,QAAT,QAAyB,cAAzB,C,CAEA;;AACA,IAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADM;AACY;AACvC;AACAC,EAAAA,OAAO,EAAE,IAHkB,CAGb;;AAHa,CAAb,CAAhB,C,CAMA;;AACAN,OAAO,CAACO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,UAAAC,MAAM,EAAI;AACR;AAEA;AACA,MAAIA,MAAM,CAACC,MAAP,KAAkB,MAAtB,EAA8B;AAC5B;AACA;AACA;AACAD,IAAAA,MAAM,CAACE,OAAP,CAAeC,WAAf,GAA6B,iDAA7B,CAJ4B,CAK5B;AACD;;AAED,MAAId,QAAQ,EAAZ,EAAgB;AACd;AACA;AACAW,IAAAA,MAAM,CAACE,OAAP,CAAeE,aAAf,GAA+B,YAAYf,QAAQ,EAAnD;AACD;;AACD,SAAOW,MAAP;AACD,CAnBH,EAoBE,UAAAK,KAAK,EAAI;AACP;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,EAFO,CAEY;;AACnB,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAxBH,E,CA2BA;;AACAf,OAAO,CAACO,YAAR,CAAqBa,QAArB,CAA8BX,GAA9B;AACE;;;;;AAKA;;;;;AAKA,UAAAW,QAAQ;AAAA,SAAIA,QAAJ;AAAA,CAXV;AAYE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,UAAAL,KAAK,EAAI;AACP;;;;;;;;;AASA,MAAI;AACF,QAAMM,GAAG,GAAGN,KAAK,CAACK,QAAN,CAAeE,IAA3B;;AACA,QAAID,GAAG,CAACE,MAAJ,KAAe,GAAnB,EAAwB;AACtB;AACA,UAAIF,GAAG,CAACE,MAAJ,KAAe,GAAnB,EAAwB;AACtB;AACA;AACA1B,QAAAA,UAAU,CAAC2B,OAAX,CAAmB,0BAAnB,EAA+C,MAA/C,EAAuD;AACrDC,UAAAA,iBAAiB,EAAE,MADkC;AAErDC,UAAAA,gBAAgB,EAAE,IAFmC;AAGrDC,UAAAA,IAAI,EAAE;AAH+C,SAAvD,EAIGC,IAJH,CAIQ,YAAM;AACZ9B,UAAAA,KAAK,CAAC+B,QAAN,CAAe,QAAf,EAAyBD,IAAzB,CAA8B,YAAM;AAClC;AACAE,YAAAA,QAAQ,CAACC,MAAT;AACD,WAHD;AAID,SATD;AAUD;;AACD,aAAOb,OAAO,CAACC,MAAR,CAAe,OAAf,CAAP;AACD;AACF,GApBD,CAoBE,OAAOa,CAAP,EAAU;AACV,QAAIjB,KAAK,CAACkB,OAAN,KAAkB,eAAtB,EAAuC;AACrC;AACA;AACApC,MAAAA,UAAU,CAAC2B,OAAX,CAAmB,cAAnB,EAAmC,MAAnC,EAA2C;AACzCC,QAAAA,iBAAiB,EAAE,MADsB;AAEzCC,QAAAA,gBAAgB,EAAE,IAFuB;AAGzCC,QAAAA,IAAI,EAAE;AAHmC,OAA3C,EAIGC,IAJH,CAIQ,YAAM;AACZ9B,QAAAA,KAAK,CAAC+B,QAAN,CAAe,QAAf,EAAyBD,IAAzB,CAA8B,YAAM;AAClC;AACAE,UAAAA,QAAQ,CAACC,MAAT;AACD,SAHD;AAID,OATD;AAUD;AACF;;AACDf,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAQF,KAApB;AACA,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CA1FH;AA6FA,eAAef,OAAf","sourcesContent":["import axios from 'axios'\nimport { MessageBox } from 'element-ui'\nimport store from '@/store'\nimport { getToken } from '@/utils/auth'\n\n// create an axios instance\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API, // url = base url + request url\n  // withCredentials: true, // send cookies when cross-domain requests\n  timeout: 5000 // request timeout\n})\n\n// request interceptor\nservice.interceptors.request.use(\n  config => {\n    // do something before request is sent\n\n    // if (store.getters.token) {\n    if (config.method === 'post') {\n      // let each request carry token\n      // ['X-Token'] is a custom headers key\n      // please modify it according to the actual situation\n      config.headers.ContentType = 'application/x-www-form-urlencoded;charset=utf-8'\n      // config.headers['X-Token'] = getToken()\n    }\n\n    if (getToken()) {\n      // debugger\n      // 让每个请求携带自定义token 请根据实际情况自行修改\n      config.headers.Authorization = 'Bearer ' + getToken()\n    }\n    return config\n  },\n  error => {\n    // do something with request error\n    console.log(error) // for debug\n    return Promise.reject(error)\n  }\n)\n\n// response interceptor\nservice.interceptors.response.use(\n  /**\n   * If you want to get http information such as headers or status\n   * Please return  response => response\n  */\n\n  /**\n   * Determine the request status by custom code\n   * Here is just an example\n   * You can also judge the status by HTTP Status Code\n   */\n  response => response,\n  /**\n  response => {\n    const res = response.data\n    // if the custom code is not 20000, it is judged as an error.\n    if (res.code !== 20000) {\n      Message({\n        message: res.message || 'Error',\n        type: 'error',\n        duration: 5 * 1000\n      })\n\n      // 50008: Illegal token; 50012: Other clients logged in; 50014: Token expired;\n      if (res.code === 50008 || res.code === 50012 || res.code === 50014) {\n        // to re-login\n        MessageBox.confirm('You have been logged out, you can cancel to stay on this page, or log in again', 'Confirm logout', {\n          confirmButtonText: 'Re-Login',\n          cancelButtonText: 'Cancel',\n          type: 'warning'\n        }).then(() => {\n          store.dispatch('user/resetToken').then(() => {\n            location.reload()\n          })\n        })\n      }\n      return Promise.reject(new Error(res.message || 'Error'))\n    } else {\n      return res\n    }\n  },\n  */\n  error => {\n    /*\n    console.log('err' + error) // for debug\n    Message({\n      message: error.message,\n      type: 'error',\n      duration: 5 * 1000\n    })\n    return Promise.reject(error)\n    */\n    try {\n      const res = error.response.data\n      if (res.status !== 200) {\n        // 登录超时或没有权限了\n        if (res.status === 401) {\n          // 请自行在引入 MessageBox\n          // import { Message, MessageBox } from 'element-ui'\n          MessageBox.confirm('你已被登出，可以取消继续留在该页面，或者重新登录', '确定登出', {\n            confirmButtonText: '重新登录',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(() => {\n            store.dispatch('LogOut').then(() => {\n              // 为了重新实例化vue-router对象 避免bug\n              location.reload()\n            })\n          })\n        }\n        return Promise.reject('error')\n      }\n    } catch (e) {\n      if (error.message === 'Network Error') {\n        // 请自行在引入 MessageBox\n        // import { Message, MessageBox } from 'element-ui'\n        MessageBox.confirm('网络请求错误，请重新登录', '确定登出', {\n          confirmButtonText: '重新登录',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          store.dispatch('LogOut').then(() => {\n            // 为了重新实例化vue-router对象 避免bug\n            location.reload()\n          })\n        })\n      }\n    }\n    console.log('err' + error)\n    return Promise.reject(error)\n  }\n)\n\nexport default service\n"]}]}
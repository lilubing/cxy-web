{"remainingRequest":"/Users/work/webworkspace/cxy-web/node_modules/babel-loader/lib/index.js!/Users/work/webworkspace/cxy-web/node_modules/eslint-loader/index.js??ref--13-0!/Users/work/webworkspace/cxy-web/src/store/modules/user.js","dependencies":[{"path":"/Users/work/webworkspace/cxy-web/src/store/modules/user.js","mtime":1610352304756},{"path":"/Users/work/webworkspace/cxy-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy93b3JrL3dlYndvcmtzcGFjZS9jeHktd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIGZyb20gIi9Vc2Vycy93b3JrL3dlYndvcmtzcGFjZS9jeHktd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIjsKaW1wb3J0IHsgbG9naW4sIGxvZ291dCwgZ2V0SW5mbywgYnRuUGVyLCBnZXRNZW51UGVyLCBnZXRQcmluY2lwbGUgfSBmcm9tICdAL2FwaS9sb2dpbic7CmltcG9ydCB7IGdldFRva2VuLCBzZXRUb2tlbiwgcmVtb3ZlVG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgcm91dGVyLCB7IHJlc2V0Um91dGVyLCBhc3luY1JvdXRlcyB9IGZyb20gJ0Avcm91dGVyJzsKLyogTGF5b3V0ICovCgppbXBvcnQgTGF5b3V0IGZyb20gJ0AvbGF5b3V0JzsKdmFyIHN0YXRlID0gewogIHRva2VuOiBnZXRUb2tlbigpLAogIG5hbWU6ICcnLAogIGF2YXRhcjogJycsCiAgaW50cm9kdWN0aW9uOiAnJywKICByb2xlczogW10sCiAgcGVybWlzc2lvbjoge30sCiAgYWRkUm91dGVyczogW10sCiAgdXNlckluZm86IHt9Cn07CnZhciBtdXRhdGlvbnMgPSB7CiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgU0VUX0lOVFJPRFVDVElPTjogZnVuY3Rpb24gU0VUX0lOVFJPRFVDVElPTihzdGF0ZSwgaW50cm9kdWN0aW9uKSB7CiAgICBzdGF0ZS5pbnRyb2R1Y3Rpb24gPSBpbnRyb2R1Y3Rpb247CiAgfSwKICBTRVRfTkFNRTogZnVuY3Rpb24gU0VUX05BTUUoc3RhdGUsIG5hbWUpIHsKICAgIHN0YXRlLm5hbWUgPSBuYW1lOwogIH0sCiAgU0VUX0FWQVRBUjogZnVuY3Rpb24gU0VUX0FWQVRBUihzdGF0ZSwgYXZhdGFyKSB7CiAgICBzdGF0ZS5hdmF0YXIgPSBhdmF0YXI7CiAgfSwKICBTRVRfUk9MRVM6IGZ1bmN0aW9uIFNFVF9ST0xFUyhzdGF0ZSwgcm9sZXMpIHsKICAgIHN0YXRlLnJvbGVzID0gcm9sZXM7CiAgfSwKICBTRVRfQlROX1BFUjogZnVuY3Rpb24gU0VUX0JUTl9QRVIoc3RhdGUsIG9iaikgewogICAgc3RhdGUucGVybWlzc2lvbltvYmoua2V5XSA9IG9iai5kYXRhOwogIH0sCiAgU0VUX1VTRVJJTkZPOiBmdW5jdGlvbiBTRVRfVVNFUklORk8oc3RhdGUsIHVzZXJJbmZvKSB7CiAgICBzdGF0ZS51c2VySW5mbyA9IHVzZXJJbmZvOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgLy8g6YCS5b2S6I635Y+W5oyJ6ZKu5p2D6ZmQCiAgR2V0QnRuUGVybWlzc2lvbjogZnVuY3Rpb24gR2V0QnRuUGVybWlzc2lvbihfcmVmLCBpZHMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBpZiAoIWlkcykgewogICAgICAgIHJlc29sdmUoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBpdGVyYXRvciA9IGZ1bmN0aW9uIGl0ZXJhdG9yKGkpIHsKICAgICAgICBpZiAoaSA9PT0gaWRzLmxlbmd0aCkgewogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gLy8g5byC5q2l6K+35rGC77yMCgoKICAgICAgICBidG5QZXIoaWRzW2ldKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgY29tbWl0KCdTRVRfQlROX1BFUicsIHsKICAgICAgICAgICAga2V5OiBpZHNbaV0sCiAgICAgICAgICAgIGRhdGE6IHJlc3BvbnNlLmRhdGEKICAgICAgICAgIH0pOwogICAgICAgICAgaSsrOwogICAgICAgICAgaXRlcmF0b3IoaSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIGl0ZXJhdG9yKDApOwogICAgfSk7CiAgfSwKICBHZW5lcmF0ZVJvdXRlczogZnVuY3Rpb24gR2VuZXJhdGVSb3V0ZXMoX3JlZjIpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGdldE1lbnVQZXIoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgIGNvbnNvbGUubG9nKGFzeW5jUm91dGVzKTsKICAgICAgICBhc3luY1JvdXRlcy5wdXNoKHsKICAgICAgICAgIHBhdGg6ICcvZXJyb3ItbG9nMScsCiAgICAgICAgICBjb21wb25lbnQ6IExheW91dCwKICAgICAgICAgIGNoaWxkcmVuOiBbewogICAgICAgICAgICBwYXRoOiAnbG9nMScsCiAgICAgICAgICAgIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCdAL3ZpZXdzL2Vycm9yLWxvZy9pbmRleCcpKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbmFtZTogJ0Vycm9yTG9nMScsCiAgICAgICAgICAgIG1ldGE6IHsKICAgICAgICAgICAgICB0aXRsZTogJ0Vycm9yIExvZzEnLAogICAgICAgICAgICAgIGljb246ICdidWcnCiAgICAgICAgICAgIH0KICAgICAgICAgIH1dCiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2coYXN5bmNSb3V0ZXMpOwogICAgICAgIC8qKgogICAgICAgIGNvbnN0IHBlcm1pc3Npb25QYWdlID0gcmVzcG9uc2UuZGF0YQogICAgICAgIHZhciByZXN1bHQgPSBbXQogICAgICAgIHZhciB0ZW1wID0gYXN5bmNSb3V0ZXJNYXAubWFwKG4gPT4gewogICAgICAgICAgY29uc3Qgb2JqID0ge30KICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG4pIHsKICAgICAgICAgICAgaWYgKGtleSAhPSAnY2hpbGRyZW4nKSB7CiAgICAgICAgICAgICAgb2JqW2tleV0gPSBuW2tleV0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyDlsIbmsqHmnIltZW51SWTnmoToj5zljZXnm7TmjqXlsZXnpLrlh7rmnaUKICAgICAgICAgICAgICBjb25zdCBhcnJUZW1wID0gW10KICAgICAgICAgICAgICBuLmNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4gewogICAgICAgICAgICAgICAgaWYgKCFjaGlsZC5tZXRhLm1lbnVJZCkgewogICAgICAgICAgICAgICAgICBhcnJUZW1wLnB1c2goY2hpbGQpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICBvYmouY2hpbGRyZW4gPSBhcnJUZW1wCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBvYmoKICAgICAgICB9KQogICAgICAgICBwZXJtaXNzaW9uUGFnZS5mb3JFYWNoKGEgPT4gewogICAgICAgICAgYXN5bmNSb3V0ZXJNYXAuZm9yRWFjaChiID0+IHsKICAgICAgICAgICAgYi5jaGlsZHJlbi5mb3JFYWNoKGMgPT4gewogICAgICAgICAgICAgIGlmIChjLm1ldGEubWVudUlkID09IGEucGVybWlzc2lvbl9pZCkgewogICAgICAgICAgICAgICAgdGVtcC5mb3JFYWNoKGQgPT4gewogICAgICAgICAgICAgICAgICBpZiAoZC5tZXRhLnBhcmVudElkID09IGIubWV0YS5wYXJlbnRJZCkgewogICAgICAgICAgICAgICAgICAgIGQuY2hpbGRyZW4ucHVzaChjKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgICAvLyDliKDpmaRjaGlsZHJlbiDplb/luqbkuLowIOeahOWvueixoQogICAgICAgIHRlbXAuZm9yRWFjaChuID0+IHsKICAgICAgICAgIGlmIChuLmNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgcmVzdWx0LnB1c2gobikKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIHJlc3VsdCA9IGNvbnN0YW50Um91dGVyTWFwLmNvbmNhdChyZXN1bHQpCiAgICAgICAgIHN0YXRlLmFkZFJvdXRlcnMgPSByZXN1bHQKICAgICAgICByZXNvbHZlKHJlc3VsdCkKICAgICAgICAgKi8KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIHVzZXIgbG9naW4KICBMb2dpbjogZnVuY3Rpb24gTG9naW4oX3JlZjMsIHVzZXJJbmZvKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIGRpc3BhdGNoID0gX3JlZjMuZGlzcGF0Y2g7CiAgICB2YXIgdXNlck5hbWUgPSB1c2VySW5mby51c2VyTmFtZSwKICAgICAgICBwYXNzd29yZCA9IHVzZXJJbmZvLnBhc3N3b3JkOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgbG9naW4oewogICAgICAgIHVzZXJOYW1lOiB1c2VyTmFtZS50cmltKCksCiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgc2V0VG9rZW4oZGF0YS5hY2Nlc3NfdG9rZW4pOyAvLyBjb25zdCB1c2VySW5mbyA9IGRhdGEudXNlckluZm8KICAgICAgICAvLyBkZWJ1Z2dlcgogICAgICAgIC8vIGNvbW1pdCgnU0VUX1VTRVJJTkZPJywgZGF0YS51c2VySW5mbykKICAgICAgICAvLyBjb21taXQoJ1NFVF9OQU1FJywgdXNlckluZm8ucmVhbE5hbWUpCiAgICAgICAgLy8gY29uc3Qgcm9sZWlkcyA9IFtdCiAgICAgICAgLy8gY29uc3QgYXV0aG9yaXRpZXMgPSB1c2VySW5mby5hdXRob3JpdGllcwogICAgICAgIC8vIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBhdXRob3JpdGllcy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAvLyAgIHJvbGVpZHNbaW5kZXhdID0gYXV0aG9yaXRpZXNbaW5kZXhdLmF1dGhvcml0eUlkCiAgICAgICAgLy8gfQogICAgICAgIC8vIGNvbW1pdCgnU0VUX1JPTEVTJywgcm9sZWlkcy5qb2luKCkpCiAgICAgICAgLy8gc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndXNlckluZm8nLCBKU09OLnN0cmluZ2lmeSh1c2VySW5mbykpCgogICAgICAgIC8qKgogICAgICAgICAqIERpc3BsYXkgZGVmYXVsdCBjYXJkIGFmdGVyIGxvZ2luCiAgICAgICAgICovCgogICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3RhYmxlVHlwZScsICcyJyk7CiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnc2hvQWxsVGlja2V0cycsICcyJyk7CiAgICAgICAgLyoqCiAgICAgICAgICogbG9hZCBtZW51CiAgICAgICAgICovCgogICAgICAgIGRpc3BhdGNoKCdHZW5lcmF0ZVJvdXRlcycpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgZGVidWdnZXI7CiAgICAgICAgICByb3V0ZXIuYWRkUm91dGVzKHJlcyk7CiAgICAgICAgICBjb25zb2xlLmxvZyhyb3V0ZXIpOwogICAgICAgIH0pOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIGdldCB1c2VyIGluZm8KICBHZXRJbmZvOiBmdW5jdGlvbiBHZXRJbmZvKF9yZWY0KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjQuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBnZXRJbmZvKHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciB1c2VySW5mbyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndXNlckluZm8nLCBKU09OLnN0cmluZ2lmeSh1c2VySW5mbykpOyAvLyBpZiAoZGF0YS5yb2xlcyAmJiBkYXRhLnJvbGVzLmxlbmd0aCA+IDApIHsgLy8g6aqM6K+B6L+U5Zue55qEcm9sZXPmmK/lkKbmmK/kuIDkuKrpnZ7nqbrmlbDnu4QKICAgICAgICAvLyAgIGNvbW1pdCgnU0VUX1JPTEVTJywgZGF0YS5yb2xlcykKICAgICAgICAvLyB9IGVsc2UgewogICAgICAgIC8vICAgcmVqZWN0KCdnZXRJbmZvOiByb2xlcyBtdXN0IGJlIGEgbm9uLW51bGwgYXJyYXkgIScpCiAgICAgICAgLy8gfQoKICAgICAgICBpZiAoIXJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgIHJlamVjdCgnVmVyaWZpY2F0aW9uIGZhaWxlZCwgcGxlYXNlIExvZ2luIGFnYWluLicpOwogICAgICAgIH0gLy8gY29uc3QgeyBuYW1lLCBhdmF0YXIsIGludHJvZHVjdGlvbiB9ID0gdXNlckluZm8KCgogICAgICAgIHZhciByb2xlcyA9IFtdOwogICAgICAgIHZhciBhdXRob3JpdGllcyA9IHVzZXJJbmZvLmF1dGhvcml0aWVzOwoKICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgYXV0aG9yaXRpZXMubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICByb2xlc1tpbmRleF0gPSBhdXRob3JpdGllc1tpbmRleF07CiAgICAgICAgfSAvLyByb2xlcyBtdXN0IGJlIGEgbm9uLWVtcHR5IGFycmF5CgoKICAgICAgICBpZiAoIXJvbGVzIHx8IHJvbGVzLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgICByZWplY3QoJ2dldEluZm86IHJvbGVzIG11c3QgYmUgYSBub24tbnVsbCBhcnJheSEnKTsKICAgICAgICB9CgogICAgICAgIGNvbW1pdCgnU0VUX1VTRVJJTkZPJywgdXNlckluZm8pOwogICAgICAgIGNvbW1pdCgnU0VUX05BTUUnLCB1c2VySW5mby51c2VyTmFtZSk7IC8vIGNvbW1pdCgnU0VUX05BTUUnLCB1c2VySW5mby5yZWFsTmFtZSkKICAgICAgICAvLyBjb21taXQoJ1NFVF9ST0xFUycsIHJvbGVzKQoKICAgICAgICBpZiAodXNlckluZm8uYXV0aG9yaXRpZXMgJiYgdXNlckluZm8uYXV0aG9yaXRpZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgLy8g6aqM6K+B6L+U5Zue55qEcm9sZXPmmK/lkKbmmK/kuIDkuKrpnZ7nqbrmlbDnu4QKICAgICAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgcm9sZXMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZWplY3QoJ2dldEluZm86IHJvbGVzIG11c3QgYmUgYSBub24tbnVsbCBhcnJheSAhJyk7CiAgICAgICAgfSAvLyBjb21taXQoJ1NFVF9OQU1FJywgcmVhbE5hbWUpCiAgICAgICAgLy8gY29tbWl0KCdTRVRfQVZBVEFSJywgYXZhdGFyKQogICAgICAgIC8vIGNvbW1pdCgnU0VUX0lOVFJPRFVDVElPTicsIGludHJvZHVjdGlvbikKCgogICAgICAgIHJlc29sdmUocm9sZXMpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8g6I635Y+W55So5oi35L+h5oGvCiAgR2V0UHJpbmNpcGxlOiBmdW5jdGlvbiBHZXRQcmluY2lwbGUoX3JlZjUpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNS5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmNS5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGdldFByaW5jaXBsZShzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIHVzZXIgbG9nb3V0CiAgTG9nb3V0OiBmdW5jdGlvbiBMb2dvdXQoX3JlZjYpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNi5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmNi5zdGF0ZSwKICAgICAgICBkaXNwYXRjaCA9IF9yZWY2LmRpc3BhdGNoOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgbG9nb3V0KHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsICcnKTsKICAgICAgICBjb21taXQoJ1NFVF9ST0xFUycsIFtdKTsKICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VySW5mbycpOwogICAgICAgIC8qKiBEaXNwbGF5IGRlZmF1bHQgY2FyZCBhZnRlciBsb2dpbiAqLwoKICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCd0YWJsZVR5cGUnKTsKICAgICAgICByZW1vdmVUb2tlbigpOwogICAgICAgIHJlc2V0Um91dGVyKCk7IC8vIHJlc2V0IHZpc2l0ZWQgdmlld3MgYW5kIGNhY2hlZCB2aWV3cwogICAgICAgIC8vIHRvIGZpeGVkIGh0dHBzOi8vZ2l0aHViLmNvbS9QYW5KaWFDaGVuL3Z1ZS1lbGVtZW50LWFkbWluL2lzc3Vlcy8yNDg1CgogICAgICAgIGRpc3BhdGNoKCd0YWdzVmlldy9kZWxBbGxWaWV3cycsIG51bGwsIHsKICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICB9KTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyByZW1vdmUgdG9rZW4KICBSZXNldFRva2VuOiBmdW5jdGlvbiBSZXNldFRva2VuKF9yZWY3KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjcuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgJycpOwogICAgICBjb21taXQoJ1NFVF9ST0xFUycsIFtdKTsKICAgICAgcmVtb3ZlVG9rZW4oKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfSwKICAvLyBkeW5hbWljYWxseSBtb2RpZnkgcGVybWlzc2lvbnMKICBjaGFuZ2VSb2xlczogZnVuY3Rpb24gY2hhbmdlUm9sZXMoX3JlZjgsIHJvbGUpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBjb21taXQsIGRpc3BhdGNoLCB0b2tlbiwgX3lpZWxkJGRpc3BhdGNoLCByb2xlcywgYWNjZXNzUm91dGVzOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY4LmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmOC5kaXNwYXRjaDsKICAgICAgICAgICAgICB0b2tlbiA9IHJvbGUgKyAnLXRva2VuJzsKICAgICAgICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIHRva2VuKTsKICAgICAgICAgICAgICBzZXRUb2tlbih0b2tlbik7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCd1c2VyL0dldEluZm8nKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfeWllbGQkZGlzcGF0Y2ggPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIHJvbGVzID0gX3lpZWxkJGRpc3BhdGNoLnJvbGVzOwogICAgICAgICAgICAgIGRlYnVnZ2VyOwogICAgICAgICAgICAgIHJlc2V0Um91dGVyKCk7IC8vIGdlbmVyYXRlIGFjY2Vzc2libGUgcm91dGVzIG1hcCBiYXNlZCBvbiByb2xlcwoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdwZXJtaXNzaW9uL2dlbmVyYXRlUm91dGVzJywgcm9sZXMsIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgYWNjZXNzUm91dGVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAvLyBkeW5hbWljYWxseSBhZGQgYWNjZXNzaWJsZSByb3V0ZXMKICAgICAgICAgICAgICByb3V0ZXIuYWRkUm91dGVzKGFjY2Vzc1JvdXRlcyk7IC8vIHJlc2V0IHZpc2l0ZWQgdmlld3MgYW5kIGNhY2hlZCB2aWV3cwoKICAgICAgICAgICAgICBkaXNwYXRjaCgndGFnc1ZpZXcvZGVsQWxsVmlld3MnLCBudWxsLCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"sources":["/Users/work/webworkspace/cxy-web/src/store/modules/user.js"],"names":["login","logout","getInfo","btnPer","getMenuPer","getPrinciple","getToken","setToken","removeToken","router","resetRouter","asyncRoutes","Layout","state","token","name","avatar","introduction","roles","permission","addRouters","userInfo","mutations","SET_TOKEN","SET_INTRODUCTION","SET_NAME","SET_AVATAR","SET_ROLES","SET_BTN_PER","obj","key","data","SET_USERINFO","actions","GetBtnPermission","ids","commit","Promise","resolve","reject","iterator","i","length","then","response","catch","err","console","log","GenerateRoutes","push","path","component","children","meta","title","icon","error","Login","dispatch","userName","password","trim","access_token","sessionStorage","setItem","res","addRoutes","GetInfo","JSON","stringify","authorities","index","GetPrinciple","Logout","removeItem","root","ResetToken","changeRoles","role","accessRoutes","namespaced"],"mappings":"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","sourcesContent":["import { login, logout, getInfo, btnPer, getMenuPer, getPrinciple } from '@/api/login'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport router, { resetRouter, asyncRoutes } from '@/router'\n/* Layout */\nimport Layout from '@/layout'\n\nconst state = {\n  token: getToken(),\n  name: '',\n  avatar: '',\n  introduction: '',\n  roles: [],\n  permission: {},\n  addRouters: [],\n  userInfo: {}\n}\n\nconst mutations = {\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_INTRODUCTION: (state, introduction) => {\n    state.introduction = introduction\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_ROLES: (state, roles) => {\n    state.roles = roles\n  },\n  SET_BTN_PER: (state, obj) => {\n    state.permission[obj.key] = obj.data\n  },\n  SET_USERINFO: (state, userInfo) => {\n    state.userInfo = userInfo\n  }\n}\n\nconst actions = {\n  // 递归获取按钮权限\n  GetBtnPermission({ commit, state }, ids) {\n    return new Promise((resolve, reject) => {\n      if (!ids) {\n        resolve()\n        return\n      }\n      const iterator = function(i) {\n        if (i === ids.length) {\n          resolve()\n          return\n        }\n        // 异步请求，\n        btnPer(ids[i]).then(response => {\n          commit('SET_BTN_PER', { key: ids[i], data: response.data })\n          i++\n          iterator(i)\n        }).catch(err => {\n          console.log(err)\n          resolve()\n        })\n      }\n      iterator(0)\n    })\n  },\n  GenerateRoutes({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getMenuPer().then(response => {\n        console.log(response.data)\n        console.log(asyncRoutes)\n        asyncRoutes.push({\n          path: '/error-log1',\n          component: Layout,\n          children: [\n            {\n              path: 'log1',\n              component: () => import('@/views/error-log/index'),\n              name: 'ErrorLog1',\n              meta: { title: 'Error Log1', icon: 'bug' }\n            }\n          ]\n        })\n        console.log(asyncRoutes)\n        /**\n        const permissionPage = response.data\n        var result = []\n        var temp = asyncRouterMap.map(n => {\n          const obj = {}\n          for (const key in n) {\n            if (key != 'children') {\n              obj[key] = n[key]\n            } else {\n              // 将没有menuId的菜单直接展示出来\n              const arrTemp = []\n              n.children.forEach(child => {\n                if (!child.meta.menuId) {\n                  arrTemp.push(child)\n                }\n              })\n              obj.children = arrTemp\n            }\n          }\n          return obj\n        })\n\n        permissionPage.forEach(a => {\n          asyncRouterMap.forEach(b => {\n            b.children.forEach(c => {\n              if (c.meta.menuId == a.permission_id) {\n                temp.forEach(d => {\n                  if (d.meta.parentId == b.meta.parentId) {\n                    d.children.push(c)\n                  }\n                })\n              }\n            })\n          })\n        })\n        // 删除children 长度为0 的对象\n        temp.forEach(n => {\n          if (n.children.length > 0) {\n            result.push(n)\n          }\n        })\n        result = constantRouterMap.concat(result)\n\n        state.addRouters = result\n        resolve(result)\n         */\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n  // user login\n  Login({ commit, dispatch }, userInfo) {\n    const { userName, password } = userInfo\n    return new Promise((resolve, reject) => {\n      login({ userName: userName.trim(), password: password }).then(response => {\n        const data = response.data.data\n        setToken(data.access_token)\n\n        // const userInfo = data.userInfo\n        // debugger\n        // commit('SET_USERINFO', data.userInfo)\n        // commit('SET_NAME', userInfo.realName)\n        // const roleids = []\n        // const authorities = userInfo.authorities\n        // for (let index = 0; index < authorities.length; index++) {\n        //   roleids[index] = authorities[index].authorityId\n        // }\n        // commit('SET_ROLES', roleids.join())\n        // sessionStorage.setItem('userInfo', JSON.stringify(userInfo))\n        /**\n         * Display default card after login\n         */\n        sessionStorage.setItem('tableType', '2')\n        sessionStorage.setItem('shoAllTickets', '2')\n        /**\n         * load menu\n         */\n        dispatch('GenerateRoutes').then(res => {\n          debugger\n          router.addRoutes(res)\n          console.log(router)\n        })\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // get user info\n  GetInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token).then(response => {\n        const userInfo = response.data\n        sessionStorage.setItem('userInfo', JSON.stringify(userInfo))\n\n        // if (data.roles && data.roles.length > 0) { // 验证返回的roles是否是一个非空数组\n        //   commit('SET_ROLES', data.roles)\n        // } else {\n        //   reject('getInfo: roles must be a non-null array !')\n        // }\n\n        if (!response.data) {\n          reject('Verification failed, please Login again.')\n        }\n\n        // const { name, avatar, introduction } = userInfo\n\n        const roles = []\n        const authorities = userInfo.authorities\n        for (let index = 0; index < authorities.length; index++) {\n          roles[index] = authorities[index]\n        }\n\n        // roles must be a non-empty array\n        if (!roles || roles.length <= 0) {\n          reject('getInfo: roles must be a non-null array!')\n        }\n\n        commit('SET_USERINFO', userInfo)\n        commit('SET_NAME', userInfo.userName)\n        // commit('SET_NAME', userInfo.realName)\n        // commit('SET_ROLES', roles)\n        if (userInfo.authorities && userInfo.authorities.length > 0) { // 验证返回的roles是否是一个非空数组\n          commit('SET_ROLES', roles)\n        } else {\n          reject('getInfo: roles must be a non-null array !')\n        }\n        // commit('SET_NAME', realName)\n        // commit('SET_AVATAR', avatar)\n        // commit('SET_INTRODUCTION', introduction)\n        resolve(roles)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // 获取用户信息\n  GetPrinciple({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getPrinciple(state.token).then(response => {\n        resolve(response)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // user logout\n  Logout({ commit, state, dispatch }) {\n    return new Promise((resolve, reject) => {\n      logout(state.token).then(() => {\n        commit('SET_TOKEN', '')\n        commit('SET_ROLES', [])\n        sessionStorage.removeItem('userInfo')\n        /** Display default card after login */\n        sessionStorage.removeItem('tableType')\n        removeToken()\n        resetRouter()\n\n        // reset visited views and cached views\n        // to fixed https://github.com/PanJiaChen/vue-element-admin/issues/2485\n        dispatch('tagsView/delAllViews', null, { root: true })\n\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // remove token\n  ResetToken({ commit }) {\n    return new Promise(resolve => {\n      commit('SET_TOKEN', '')\n      commit('SET_ROLES', [])\n      removeToken()\n      resolve()\n    })\n  },\n\n  // dynamically modify permissions\n  async changeRoles({ commit, dispatch }, role) {\n    const token = role + '-token'\n\n    commit('SET_TOKEN', token)\n    setToken(token)\n\n    const { roles } = await dispatch('user/GetInfo')\n\n    debugger\n    resetRouter()\n\n    // generate accessible routes map based on roles\n    const accessRoutes = await dispatch('permission/generateRoutes', roles, { root: true })\n    // dynamically add accessible routes\n    router.addRoutes(accessRoutes)\n\n    // reset visited views and cached views\n    dispatch('tagsView/delAllViews', null, { root: true })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n"]}]}
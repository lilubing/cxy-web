{"remainingRequest":"/Users/work/webworkspace/cxy-web/node_modules/babel-loader/lib/index.js!/Users/work/webworkspace/cxy-web/node_modules/eslint-loader/index.js??ref--13-0!/Users/work/webworkspace/cxy-web/src/utils/request.js","dependencies":[{"path":"/Users/work/webworkspace/cxy-web/src/utils/request.js","mtime":1610759699939},{"path":"/Users/work/webworkspace/cxy-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IE1lc3NhZ2VCb3ggfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7IC8vIGNyZWF0ZSBhbiBheGlvcyBpbnN0YW5jZQoKdmFyIHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEksCiAgLy8gdXJsID0gYmFzZSB1cmwgKyByZXF1ZXN0IHVybAogIC8vIHdpdGhDcmVkZW50aWFsczogdHJ1ZSwgLy8gc2VuZCBjb29raWVzIHdoZW4gY3Jvc3MtZG9tYWluIHJlcXVlc3RzCiAgdGltZW91dDogNTAwMCAvLyByZXF1ZXN0IHRpbWVvdXQKCn0pOyAvLyByZXF1ZXN0IGludGVyY2VwdG9yCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgLy8gZG8gc29tZXRoaW5nIGJlZm9yZSByZXF1ZXN0IGlzIHNlbnQKICAvLyBpZiAoc3RvcmUuZ2V0dGVycy50b2tlbikgewogIGlmIChjb25maWcubWV0aG9kID09PSAncG9zdCcpIHsKICAgIC8vIGxldCBlYWNoIHJlcXVlc3QgY2FycnkgdG9rZW4KICAgIC8vIFsnWC1Ub2tlbiddIGlzIGEgY3VzdG9tIGhlYWRlcnMga2V5CiAgICAvLyBwbGVhc2UgbW9kaWZ5IGl0IGFjY29yZGluZyB0byB0aGUgYWN0dWFsIHNpdHVhdGlvbgogICAgY29uZmlnLmhlYWRlcnMuQ29udGVudFR5cGUgPSAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgnOyAvLyBjb25maWcuaGVhZGVyc1snWC1Ub2tlbiddID0gZ2V0VG9rZW4oKQogIH0KCiAgaWYgKGdldFRva2VuKCkpIHsKICAgIC8vIOiuqeavj+S4quivt+axguaQuuW4puiHquWumuS5iXRva2VuIOivt+agueaNruWunumZheaDheWGteiHquihjOS/ruaUuQogICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCZWFyZXIgJyArIGdldFRva2VuKCk7CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAvLyBkbyBzb21ldGhpbmcgd2l0aCByZXF1ZXN0IGVycm9yCiAgY29uc29sZS5sb2coZXJyb3IpOyAvLyBmb3IgZGVidWcKCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8vIHJlc3BvbnNlIGludGVyY2VwdG9yCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoCi8qKgogKiBJZiB5b3Ugd2FudCB0byBnZXQgaHR0cCBpbmZvcm1hdGlvbiBzdWNoIGFzIGhlYWRlcnMgb3Igc3RhdHVzCiAqIFBsZWFzZSByZXR1cm4gIHJlc3BvbnNlID0+IHJlc3BvbnNlCiovCgovKioKICogRGV0ZXJtaW5lIHRoZSByZXF1ZXN0IHN0YXR1cyBieSBjdXN0b20gY29kZQogKiBIZXJlIGlzIGp1c3QgYW4gZXhhbXBsZQogKiBZb3UgY2FuIGFsc28ganVkZ2UgdGhlIHN0YXR1cyBieSBIVFRQIFN0YXR1cyBDb2RlCiAqLwpmdW5jdGlvbiAocmVzcG9uc2UpIHsKICByZXR1cm4gcmVzcG9uc2U7Cn0sCi8qKgpyZXNwb25zZSA9PiB7CiAgY29uc3QgcmVzID0gcmVzcG9uc2UuZGF0YQogIC8vIGlmIHRoZSBjdXN0b20gY29kZSBpcyBub3QgMjAwMDAsIGl0IGlzIGp1ZGdlZCBhcyBhbiBlcnJvci4KICBpZiAocmVzLmNvZGUgIT09IDIwMDAwKSB7CiAgICBNZXNzYWdlKHsKICAgICAgbWVzc2FnZTogcmVzLm1lc3NhZ2UgfHwgJ0Vycm9yJywKICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgZHVyYXRpb246IDUgKiAxMDAwCiAgICB9KQogICAgIC8vIDUwMDA4OiBJbGxlZ2FsIHRva2VuOyA1MDAxMjogT3RoZXIgY2xpZW50cyBsb2dnZWQgaW47IDUwMDE0OiBUb2tlbiBleHBpcmVkOwogICAgaWYgKHJlcy5jb2RlID09PSA1MDAwOCB8fCByZXMuY29kZSA9PT0gNTAwMTIgfHwgcmVzLmNvZGUgPT09IDUwMDE0KSB7CiAgICAgIC8vIHRvIHJlLWxvZ2luCiAgICAgIE1lc3NhZ2VCb3guY29uZmlybSgnWW91IGhhdmUgYmVlbiBsb2dnZWQgb3V0LCB5b3UgY2FuIGNhbmNlbCB0byBzdGF5IG9uIHRoaXMgcGFnZSwgb3IgbG9nIGluIGFnYWluJywgJ0NvbmZpcm0gbG9nb3V0JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnUmUtTG9naW4nLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdDYW5jZWwnLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBzdG9yZS5kaXNwYXRjaCgndXNlci9yZXNldFRva2VuJykudGhlbigoKSA9PiB7CiAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKQogICAgICAgIH0pCiAgICAgIH0pCiAgICB9CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKHJlcy5tZXNzYWdlIHx8ICdFcnJvcicpKQogIH0gZWxzZSB7CiAgICByZXR1cm4gcmVzCiAgfQp9LAoqLwpmdW5jdGlvbiAoZXJyb3IpIHsKICAvKgogIGNvbnNvbGUubG9nKCdlcnInICsgZXJyb3IpIC8vIGZvciBkZWJ1ZwogIE1lc3NhZ2UoewogICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgIHR5cGU6ICdlcnJvcicsCiAgICBkdXJhdGlvbjogNSAqIDEwMDAKICB9KQogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcikKICAqLwogIHRyeSB7CiAgICB2YXIgcmVzID0gZXJyb3IucmVzcG9uc2UuZGF0YTsKCiAgICBpZiAocmVzLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgIC8vIOeZu+W9lei2heaXtuaIluayoeacieadg+mZkOS6hgogICAgICBpZiAocmVzLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgLy8g6K+36Ieq6KGM5Zyo5byV5YWlIE1lc3NhZ2VCb3gKICAgICAgICAvLyBpbXBvcnQgeyBNZXNzYWdlLCBNZXNzYWdlQm94IH0gZnJvbSAnZWxlbWVudC11aScKICAgICAgICBNZXNzYWdlQm94LmNvbmZpcm0oJ+S9oOW3suiiq+eZu+WHuu+8jOWPr+S7peWPlua2iOe7p+e7reeVmeWcqOivpemhtemdou+8jOaIluiAhemHjeaWsOeZu+W9lScsICfnoa7lrprnmbvlh7onLCB7CiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+mHjeaWsOeZu+W9lScsCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ0xvZ091dCcpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyDkuLrkuobph43mlrDlrp7kvovljJZ2dWUtcm91dGVy5a+56LGhIOmBv+WFjWJ1ZwogICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ2Vycm9yJyk7CiAgICB9CiAgfSBjYXRjaCAoZSkgewogICAgaWYgKGVycm9yLm1lc3NhZ2UgPT09ICdOZXR3b3JrIEVycm9yJykgewogICAgICAvLyDor7foh6rooYzlnKjlvJXlhaUgTWVzc2FnZUJveAogICAgICAvLyBpbXBvcnQgeyBNZXNzYWdlLCBNZXNzYWdlQm94IH0gZnJvbSAnZWxlbWVudC11aScKICAgICAgTWVzc2FnZUJveC5jb25maXJtKCfnvZHnu5zor7fmsYLplJnor6/vvIzor7fph43mlrDnmbvlvZUnLCAn56Gu5a6a55m75Ye6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn6YeN5paw55m75b2VJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ0xvZ091dCcpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8g5Li65LqG6YeN5paw5a6e5L6L5YyWdnVlLXJvdXRlcuWvueixoSDpgb/lhY1idWcKICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9CgogIGNvbnNvbGUubG9nKCdlcnInICsgZXJyb3IpOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpleHBvcnQgZGVmYXVsdCBzZXJ2aWNlOw=="},{"version":3,"sources":["/Users/work/webworkspace/cxy-web/src/utils/request.js"],"names":["axios","MessageBox","store","getToken","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","method","headers","ContentType","Authorization","error","console","log","Promise","reject","response","res","data","status","confirm","confirmButtonText","cancelButtonText","type","then","dispatch","location","reload","e","message"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,YAA3B;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,QAAT,QAAyB,cAAzB,C,CAEA;;AACA,IAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADM;AACY;AACvC;AACAC,EAAAA,OAAO,EAAE,IAHkB,CAGb;;AAHa,CAAb,CAAhB,C,CAMA;;AACAN,OAAO,CAACO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,UAAAC,MAAM,EAAI;AACR;AAEA;AACA,MAAIA,MAAM,CAACC,MAAP,KAAkB,MAAtB,EAA8B;AAC5B;AACA;AACA;AACAD,IAAAA,MAAM,CAACE,OAAP,CAAeC,WAAf,GAA6B,iDAA7B,CAJ4B,CAK5B;AACD;;AAED,MAAId,QAAQ,EAAZ,EAAgB;AACd;AACAW,IAAAA,MAAM,CAACE,OAAP,CAAeE,aAAf,GAA+B,YAAYf,QAAQ,EAAnD;AACD;;AACD,SAAOW,MAAP;AACD,CAlBH,EAmBE,UAAAK,KAAK,EAAI;AACP;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,EAFO,CAEY;;AACnB,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAvBH,E,CA0BA;;AACAf,OAAO,CAACO,YAAR,CAAqBa,QAArB,CAA8BX,GAA9B;AACE;;;;;AAKA;;;;;AAKA,UAAAW,QAAQ;AAAA,SAAIA,QAAJ;AAAA,CAXV;AAYE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,UAAAL,KAAK,EAAI;AACP;;;;;;;;;AASA,MAAI;AACF,QAAMM,GAAG,GAAGN,KAAK,CAACK,QAAN,CAAeE,IAA3B;;AACA,QAAID,GAAG,CAACE,MAAJ,KAAe,GAAnB,EAAwB;AACtB;AACA,UAAIF,GAAG,CAACE,MAAJ,KAAe,GAAnB,EAAwB;AACtB;AACA;AACA1B,QAAAA,UAAU,CAAC2B,OAAX,CAAmB,0BAAnB,EAA+C,MAA/C,EAAuD;AACrDC,UAAAA,iBAAiB,EAAE,MADkC;AAErDC,UAAAA,gBAAgB,EAAE,IAFmC;AAGrDC,UAAAA,IAAI,EAAE;AAH+C,SAAvD,EAIGC,IAJH,CAIQ,YAAM;AACZ9B,UAAAA,KAAK,CAAC+B,QAAN,CAAe,QAAf,EAAyBD,IAAzB,CAA8B,YAAM;AAClC;AACAE,YAAAA,QAAQ,CAACC,MAAT;AACD,WAHD;AAID,SATD;AAUD;;AACD,aAAOb,OAAO,CAACC,MAAR,CAAe,OAAf,CAAP;AACD;AACF,GApBD,CAoBE,OAAOa,CAAP,EAAU;AACV,QAAIjB,KAAK,CAACkB,OAAN,KAAkB,eAAtB,EAAuC;AACrC;AACA;AACApC,MAAAA,UAAU,CAAC2B,OAAX,CAAmB,cAAnB,EAAmC,MAAnC,EAA2C;AACzCC,QAAAA,iBAAiB,EAAE,MADsB;AAEzCC,QAAAA,gBAAgB,EAAE,IAFuB;AAGzCC,QAAAA,IAAI,EAAE;AAHmC,OAA3C,EAIGC,IAJH,CAIQ,YAAM;AACZ9B,QAAAA,KAAK,CAAC+B,QAAN,CAAe,QAAf,EAAyBD,IAAzB,CAA8B,YAAM;AAClC;AACAE,UAAAA,QAAQ,CAACC,MAAT;AACD,SAHD;AAID,OATD;AAUD;AACF;;AACDf,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAQF,KAApB;AACA,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CA1FH;AA6FA,eAAef,OAAf","sourcesContent":["import axios from 'axios'\nimport { MessageBox } from 'element-ui'\nimport store from '@/store'\nimport { getToken } from '@/utils/auth'\n\n// create an axios instance\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API, // url = base url + request url\n  // withCredentials: true, // send cookies when cross-domain requests\n  timeout: 5000 // request timeout\n})\n\n// request interceptor\nservice.interceptors.request.use(\n  config => {\n    // do something before request is sent\n\n    // if (store.getters.token) {\n    if (config.method === 'post') {\n      // let each request carry token\n      // ['X-Token'] is a custom headers key\n      // please modify it according to the actual situation\n      config.headers.ContentType = 'application/x-www-form-urlencoded;charset=utf-8'\n      // config.headers['X-Token'] = getToken()\n    }\n\n    if (getToken()) {\n      // 让每个请求携带自定义token 请根据实际情况自行修改\n      config.headers.Authorization = 'Bearer ' + getToken()\n    }\n    return config\n  },\n  error => {\n    // do something with request error\n    console.log(error) // for debug\n    return Promise.reject(error)\n  }\n)\n\n// response interceptor\nservice.interceptors.response.use(\n  /**\n   * If you want to get http information such as headers or status\n   * Please return  response => response\n  */\n\n  /**\n   * Determine the request status by custom code\n   * Here is just an example\n   * You can also judge the status by HTTP Status Code\n   */\n  response => response,\n  /**\n  response => {\n    const res = response.data\n    // if the custom code is not 20000, it is judged as an error.\n    if (res.code !== 20000) {\n      Message({\n        message: res.message || 'Error',\n        type: 'error',\n        duration: 5 * 1000\n      })\n\n      // 50008: Illegal token; 50012: Other clients logged in; 50014: Token expired;\n      if (res.code === 50008 || res.code === 50012 || res.code === 50014) {\n        // to re-login\n        MessageBox.confirm('You have been logged out, you can cancel to stay on this page, or log in again', 'Confirm logout', {\n          confirmButtonText: 'Re-Login',\n          cancelButtonText: 'Cancel',\n          type: 'warning'\n        }).then(() => {\n          store.dispatch('user/resetToken').then(() => {\n            location.reload()\n          })\n        })\n      }\n      return Promise.reject(new Error(res.message || 'Error'))\n    } else {\n      return res\n    }\n  },\n  */\n  error => {\n    /*\n    console.log('err' + error) // for debug\n    Message({\n      message: error.message,\n      type: 'error',\n      duration: 5 * 1000\n    })\n    return Promise.reject(error)\n    */\n    try {\n      const res = error.response.data\n      if (res.status !== 200) {\n        // 登录超时或没有权限了\n        if (res.status === 401) {\n          // 请自行在引入 MessageBox\n          // import { Message, MessageBox } from 'element-ui'\n          MessageBox.confirm('你已被登出，可以取消继续留在该页面，或者重新登录', '确定登出', {\n            confirmButtonText: '重新登录',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(() => {\n            store.dispatch('LogOut').then(() => {\n              // 为了重新实例化vue-router对象 避免bug\n              location.reload()\n            })\n          })\n        }\n        return Promise.reject('error')\n      }\n    } catch (e) {\n      if (error.message === 'Network Error') {\n        // 请自行在引入 MessageBox\n        // import { Message, MessageBox } from 'element-ui'\n        MessageBox.confirm('网络请求错误，请重新登录', '确定登出', {\n          confirmButtonText: '重新登录',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          store.dispatch('LogOut').then(() => {\n            // 为了重新实例化vue-router对象 避免bug\n            location.reload()\n          })\n        })\n      }\n    }\n    console.log('err' + error)\n    return Promise.reject(error)\n  }\n)\n\nexport default service\n"]}]}
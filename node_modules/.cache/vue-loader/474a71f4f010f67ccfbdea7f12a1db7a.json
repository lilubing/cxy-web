{"remainingRequest":"/Users/work/webworkspace/cxy-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/work/webworkspace/cxy-web/src/views/system/menu-button/EditForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/work/webworkspace/cxy-web/src/views/system/menu-button/EditForm.vue","mtime":1611049811427},{"path":"/Users/work/webworkspace/cxy-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/work/webworkspace/cxy-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCB0aGUgY29tcG9uZW50Ci8vIGltcG9ydCBUcmVlc2VsZWN0IGZyb20gJ0ByaW9waGFlL3Z1ZS10cmVlc2VsZWN0JwppbXBvcnQgVHJlZVNlbGVjdCBmcm9tICdAL2NvbXBvbmVudHMvVHJlZVNlbGVjdCcKCi8vIGltcG9ydCB0aGUgc3R5bGVzCmltcG9ydCAnQHJpb3BoYWUvdnVlLXRyZWVzZWxlY3QvZGlzdC92dWUtdHJlZXNlbGVjdC5jc3MnCmltcG9ydCB7IHF1ZXJ5TWVudUxpc3QsIHF1ZXJ5TWVudUluZm8sIHVwZGF0ZU1lbnUgfSBmcm9tICdAL2FwaS9tZW51LWJ1dHRvbicKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdFZGl0RnJvbScsCiAgY29tcG9uZW50czogeyBUcmVlU2VsZWN0IH0sCiAgcHJvcHM6IHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB2dWUvcmVxdWlyZS1kZWZhdWx0LXByb3AKICAgICdtZW51QnV0dG9uSWQnOiBTdHJpbmcsCiAgICAndmlzYWJsZSc6IEJvb2xlYW4KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgLy8g5riF56m65qCR5b2i6YCJ5oup5qGG5pWw5o2uCiAgICAgIGNsZWFyVHJlZVNlbGVjdDogMCwKICAgICAgZGVmYXVsdFByb3BzOiB7CiAgICAgICAgbGFiZWw6ICduYW1lJwogICAgICB9LAogICAgICAvLyDmjqfliLbmoJHnu4Tku7bmmL7npLogdi1pZiDkvKDlgLznlKgKICAgICAgdHJlZUZsYWc6IGZhbHNlLAogICAgICBkZWZhdWx0Q2hlY2tlZEtleXM6IFtdLAogICAgICBjaGVja2VkS2V5czogW10sCiAgICAgIG5vZGVLZXk6ICdtZW51QnV0dG9uSWQnLAogICAgICBmb3JtOiB7CiAgICAgICAgbWVudTogewogICAgICAgICAgbWVudUJ1dHRvbklkOiAnJywKICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgdXJpOiAnJywKICAgICAgICAgIGJ0bklkOiAnJywKICAgICAgICAgIG1lbnVCdXR0b25WYWx1ZTogJycsCiAgICAgICAgICBpY29uOiAnJywKICAgICAgICAgIHR5cGU6IDAsCiAgICAgICAgICBvcmRlcnM6ICcnLAogICAgICAgICAgcGFyZW50SWQ6ICcnCiAgICAgICAgfSwKICAgICAgICBtZW51TGlzdDogW10KICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TWVudUluZm8oKQogICAgdGhpcy5nZXRNZW51TGlzdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVTdWJtaXQoZm9ybSkgewogICAgICB1cGRhdGVNZW51KHRoaXMuZm9ybS5tZW51KS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMuaGFuZGxlSGlkZSgpCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn5L+u5pS55oiQ5YqfJywKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgIH0pCiAgICAgICAgdGhpcy4kZW1pdCgnZ2V0TWVudXMnKQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlSGlkZSgpIHsKICAgICAgdGhpcy4kZW1pdCgnaGFuZGxlRWRpdEhpZGUnKQogICAgfSwKICAgIGdldE1lbnVJbmZvKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgIHF1ZXJ5TWVudUluZm8odGhpcy5tZW51QnV0dG9uSWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhLmRhdGEKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMuZm9ybS5tZW51ID0gZGF0YQogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICB9KQogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgfSwKICAgIGdldE1lbnVMaXN0KCkgewogICAgICAvLyBjb25zdCB0aGF0ID0gdGhpcwogICAgICBxdWVyeU1lbnVMaXN0KCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YQogICAgICAgIHRoaXMuY2hlY2tlZEtleXMucHVzaCh0aGlzLmZvcm0ubWVudS5wYXJlbnRJZCkKICAgICAgICB0aGlzLmZvcm0ubWVudUxpc3QgPSBkYXRhLmRhdGEKICAgICAgICAvLyDmjqfliLbmoJHnu4Tku7bmmL7npLogdi1pZiDkvKDlgLznlKgKICAgICAgICB0aGlzLnRyZWVGbGFnID0gdHJ1ZQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgIH0pCiAgICB9LAogICAgcG9wb3ZlckhpZGUoY2hlY2tlZElkcywgY2hlY2tlZERhdGEpIHsKICAgICAgLy8g5Lya6KKr6Kem5Y+R5Lik5qyh55qE6Zeu6aKYCiAgICAgIGlmIChjaGVja2VkRGF0YSAhPT0gdW5kZWZpbmVkICYmIGNoZWNrZWREYXRhICE9IG51bGwpIHsKICAgICAgICBjb25zb2xlLmxvZygnY2hlY2tlZERhdGEubWVudUJ1dHRvbklkPT0nICsgY2hlY2tlZElkcykKICAgICAgICB0aGlzLmZvcm0ubWVudS5wYXJlbnRJZCA9IGNoZWNrZWREYXRhLm1lbnVCdXR0b25JZAogICAgICAgIC8vIGNoZWNrZWREYXRhLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgLy8gICBpZiAoaXRlbS5jaGlsZHJlbkxpc3QgPT09IHVuZGVmaW5lZCB8fCBpdGVtLmNoaWxkcmVuTGlzdCA9PSBudWxsKSB7CiAgICAgICAgLy8gICAgIHRoaXMuY2FyTGlzdC5wdXNoKGl0ZW0ubWVudUlkKQogICAgICAgIC8vICAgfQogICAgICAgIC8vIH0pCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["EditForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditForm.vue","sourceRoot":"src/views/system/menu-button","sourcesContent":["<template>\n  <el-dialog\n    title=\"编辑\"\n    :visible=\"visable\"\n    width=\"30%\"\n    :modal=\"false\"\n    :show-close=\"false\"\n  >\n    <!--   ref=\"form\"-->\n    <el-form ref=\"form\" v-loading=\"loading\" label-suffix=\":\" :model=\"form\" label-width=\"100px\">\n      <el-form-item label=\"菜单按钮\">\n        <el-input v-model=\"form.menu.name\" />\n      </el-form-item>\n      <el-form-item label=\"菜单url\">\n        <el-input v-model=\"form.menu.uri\" />\n      </el-form-item>\n      <el-form-item label=\"按钮Id\">\n        <el-input v-model=\"form.menu.btnId\" />\n      </el-form-item>\n      <el-form-item label=\"菜单按钮值\">\n        <el-input v-model=\"form.menu.menuButtonValue\" />\n      </el-form-item>\n      <el-form-item label=\"菜单图标\">\n        <el-input v-model=\"form.menu.icon\" />\n      </el-form-item>\n      <el-form-item label=\"是否为菜单\">\n        <el-radio-group v-model=\"form.menu.type\">\n          <el-radio :label=\"0\">是</el-radio>\n          <el-radio :label=\"1\">否</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"同级序号\">\n        <el-input v-model=\"form.menu.orders\" />\n      </el-form-item>\n      <el-form-item label=\"状态\">\n        <el-radio-group v-model=\"form.menu.state\">\n          <el-radio :label=\"0\">禁用</el-radio>\n          <el-radio :label=\"1\">正常</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"上级菜单\">\n        <!-- <el-select v-model=\"form.menu.parentId\" filterable clearable placeholder=\"请选择\">\n          <el-option\n            v-for=\"item in form.menuList\"\n            :key=\"item.menuButtonId\"\n            :label=\"item.name\"\n            :value=\"item.menuButtonId\"\n          />\n        </el-select> -->\n        <!-- https://blog.csdn.net/qq_32786139/article/details/108345247 -->\n        <tree-select\n          v-if=\"treeFlag\"\n          :data=\"form.menuList\"\n          placeholder=\"选择车辆\"\n          :default-props=\"defaultProps\"\n          :clear=\"clearTreeSelect\"\n          :node-key=\"nodeKey\"\n          :checked-keys=\"checkedKeys\"\n          @parent-event=\"popoverHide\"\n          @popoverHide=\"popoverHide\"\n        />\n        <!-- <treeselect :id=\"item.menuButtonId\" :label=\"item.name\" multiple=\"true\" :value=\"item.menuButtonId\" :options=\"form.menuList\" placeholder=\"请选择...\" /> -->\n      </el-form-item>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"handleHide\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"handleSubmit('form')\">确 定</el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\n// import the component\n// import Treeselect from '@riophae/vue-treeselect'\nimport TreeSelect from '@/components/TreeSelect'\n\n// import the styles\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\nimport { queryMenuList, queryMenuInfo, updateMenu } from '@/api/menu-button'\nexport default {\n  name: 'EditFrom',\n  components: { TreeSelect },\n  props: {\n    // eslint-disable-next-line vue/require-default-prop\n    'menuButtonId': String,\n    'visable': Boolean\n  },\n  data() {\n    return {\n      loading: false,\n      // 清空树形选择框数据\n      clearTreeSelect: 0,\n      defaultProps: {\n        label: 'name'\n      },\n      // 控制树组件显示 v-if 传值用\n      treeFlag: false,\n      defaultCheckedKeys: [],\n      checkedKeys: [],\n      nodeKey: 'menuButtonId',\n      form: {\n        menu: {\n          menuButtonId: '',\n          name: '',\n          uri: '',\n          btnId: '',\n          menuButtonValue: '',\n          icon: '',\n          type: 0,\n          orders: '',\n          parentId: ''\n        },\n        menuList: []\n      }\n    }\n  },\n  created() {\n    this.getMenuInfo()\n    this.getMenuList()\n  },\n  methods: {\n    handleSubmit(form) {\n      updateMenu(this.form.menu).then((response) => {\n        this.handleHide()\n        this.$message({\n          showClose: true,\n          message: '修改成功',\n          type: 'success'\n        })\n        this.$emit('getMenus')\n      }).catch(error => {\n        console.log(error)\n      })\n    },\n    handleHide() {\n      this.$emit('handleEditHide')\n    },\n    getMenuInfo() {\n      this.loading = true\n      queryMenuInfo(this.menuButtonId).then(response => {\n        const data = response.data.data\n        if (response.data.code === 200) {\n          this.form.menu = data\n        }\n      }).catch(error => {\n        console.log(error)\n      })\n      this.loading = false\n    },\n    getMenuList() {\n      // const that = this\n      queryMenuList().then((response) => {\n        const data = response.data\n        this.checkedKeys.push(this.form.menu.parentId)\n        this.form.menuList = data.data\n        // 控制树组件显示 v-if 传值用\n        this.treeFlag = true\n      }).catch(error => {\n        console.log(error)\n      })\n    },\n    popoverHide(checkedIds, checkedData) {\n      // 会被触发两次的问题\n      if (checkedData !== undefined && checkedData != null) {\n        console.log('checkedData.menuButtonId==' + checkedIds)\n        this.form.menu.parentId = checkedData.menuButtonId\n        // checkedData.forEach(item => {\n        //   if (item.childrenList === undefined || item.childrenList == null) {\n        //     this.carList.push(item.menuId)\n        //   }\n        // })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}